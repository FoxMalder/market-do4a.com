/*!
 * Front for marketdo4a.com 1.4.0 
 * By Roman Meshcheryakov 2020
 */
(window.webpackJsonp=window.webpackJsonp||[]).push([[3,12],{14:function(t,e){t.exports=jQuery},165:function(t,e,r){"use strict";(function(t){r.d(e,"a",(function(){return k}));var n=r(7),o=r.n(n),i=r(8),s=r.n(i),a=r(2),c=r.n(a),l=r(6),u=r(3),d=r(5),p=r(38),f=r(169),h=(r(279),r(12)),m=r.n(h),v=r(28),_=r.n(v),y=r(54);function b(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}var g=function(){function t(){var e=this;o()(this,t),c()(this,"onClick",(function(t){t.preventDefault(),e.nextPage()})),this.$el=document.querySelector(".p-section-popular"),this.$el&&(this.request=JSON.parse(this.$el.dataset.request),this.$container=this.$el.querySelector(".p-section-popular__list"),this.$control=this.$el.querySelector(".load-more-block"),this.$controlLink=this.$el.querySelector(".load-more-block__link"),this.$controlText=this.$el.querySelector(".load-more-block__value"),this.shownCards=this.$container.querySelectorAll("[data-product-id]").length,this.totalCards=this.shownCards,this.page=this.shownCards>0?1:0,this.init())}return s()(t,[{key:"init",value:function(){this.$controlLink.addEventListener("click",this.onClick)}},{key:"add",value:function(t){var e=this;t.forEach((function(t){var r;"product"===t.type?(r=(r=new y.a(t.options)).getElement(),e.shownCards+=1):r=d.a.htmlToElement(t.html),e.$container.appendChild(r)}))}},{key:"send",value:function(t){return m.a.post("/ajax/catalog/products/by-params/",_.a.stringify(t)).then((function(t){return t.data})).then((function(t){if(1===t.success)return t.data;var e=new Error(t.message);throw e.response=t,e}))}},{key:"nextPage",value:function(){var t=this,e=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?b(Object(r),!0).forEach((function(e){c()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},this.request,{page:this.page+1});this.$control.classList.add("loading"),this.send(e).then((function(e){t.page+=1,t.add(e.items),t.page>1&&(t.totalCards=e.count,t.$controlText.innerHTML="Показано ".concat(t.shownCards," из ").concat(t.totalCards),t.shownCards<t.totalCards?t.$control.style.display="":t.$control.style.display="none"),t.$control.classList.remove("loading")})).catch((function(){t.$control.classList.remove("loading")}))}}]),t}(),k=function(){function e(){o()(this,e)}return s()(e,[{key:"init",value:function(){try{new g}catch(t){console.error(t)}if(d.a.log("Checkout","Registration storage module"),u.a.registerModule("checkout",Object(p.e)(t.soaData)),d.a.log("Checkout","Creating a new Vue instance"),this.vm=new l.a({store:u.a,render:function(t){return t(f.a)}}),d.a.log("Checkout","Mounting Vue"),this.vm.$mount("#vueTest"),t.IPOLSDEK_pvz){var e=t.IPOLSDEK_pvz;e.choozePVZ=function(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e[e.curMode][e.city][t];n&&(e.pvzAdress="".concat(e.city,", ").concat(n.Address," #S").concat(t),e.pvzId=t,e.markUnable(),r||(u.a.dispatch("checkout/refreshOrderAjax"),e.close(!0)))},e.markUnable=function(){e.pvzInputs.some((function(t){return"function"!=typeof t&&(u.a.commit("checkout/SET_PROPERTY",{name:"ORDER_PROP_".concat(t),value:e.pvzAdress}),!0)}))},u.a.subscribeAction((function(t,r){if("checkout/refreshOrder"===t.type){var n=t.payload[0];e.onLoad(n)}}))}}}]),e}()}).call(this,r(16))},166:function(t,e,r){var n=r(268),o=r(269),i=r(270);t.exports=function(t,e){return n(t)||o(t,e)||i()}},167:function(t,e,r){window,t.exports=function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/dist/",r(r.s=3)}([function(t,e,r){var n=r(6);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals),(0,r(2).default)("da410cd4",n,!1,{})},function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var r=function(t,e){var r=t[1]||"",n=t[3];if(!n)return r;if(e&&"function"==typeof btoa){var o=function(t){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+" */"}(n),i=n.sources.map((function(t){return"/*# sourceURL="+n.sourceRoot+t+" */"}));return[r].concat(i).concat([o]).join("\n")}return[r].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+r+"}":r})).join("")},e.i=function(t,r){"string"==typeof t&&(t=[[null,t,""]]);for(var n={},o=0;o<this.length;o++){var i=this[o][0];"number"==typeof i&&(n[i]=!0)}for(o=0;o<t.length;o++){var s=t[o];"number"==typeof s[0]&&n[s[0]]||(r&&!s[2]?s[2]=r:r&&(s[2]="("+s[2]+") and ("+r+")"),e.push(s))}},e}},function(t,e,r){"use strict";function n(t,e){for(var r=[],n={},o=0;o<e.length;o++){var i=e[o],s=i[0],a={id:t+":"+o,css:i[1],media:i[2],sourceMap:i[3]};n[s]?n[s].parts.push(a):r.push(n[s]={id:s,parts:[a]})}return r}r.r(e),r.d(e,"default",(function(){return h}));var o="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!o)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var i={},s=o&&(document.head||document.getElementsByTagName("head")[0]),a=null,c=0,l=!1,u=function(){},d=null,p="data-vue-ssr-id",f="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function h(t,e,r,o){l=r,d=o||{};var s=n(t,e);return m(s),function(e){for(var r=[],o=0;o<s.length;o++){var a=s[o];(c=i[a.id]).refs--,r.push(c)}for(e?m(s=n(t,e)):s=[],o=0;o<r.length;o++){var c;if(0===(c=r[o]).refs){for(var l=0;l<c.parts.length;l++)c.parts[l]();delete i[c.id]}}}}function m(t){for(var e=0;e<t.length;e++){var r=t[e],n=i[r.id];if(n){n.refs++;for(var o=0;o<n.parts.length;o++)n.parts[o](r.parts[o]);for(;o<r.parts.length;o++)n.parts.push(_(r.parts[o]));n.parts.length>r.parts.length&&(n.parts.length=r.parts.length)}else{var s=[];for(o=0;o<r.parts.length;o++)s.push(_(r.parts[o]));i[r.id]={id:r.id,refs:1,parts:s}}}}function v(){var t=document.createElement("style");return t.type="text/css",s.appendChild(t),t}function _(t){var e,r,n=document.querySelector("style["+p+'~="'+t.id+'"]');if(n){if(l)return u;n.parentNode.removeChild(n)}if(f){var o=c++;n=a||(a=v()),e=b.bind(null,n,o,!1),r=b.bind(null,n,o,!0)}else n=v(),e=function(t,e){var r=e.css,n=e.media,o=e.sourceMap;if(n&&t.setAttribute("media",n),d.ssrId&&t.setAttribute(p,e.id),o&&(r+="\n/*# sourceURL="+o.sources[0]+" */",r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}.bind(null,n),r=function(){n.parentNode.removeChild(n)};return e(t),function(n){if(n){if(n.css===t.css&&n.media===t.media&&n.sourceMap===t.sourceMap)return;e(t=n)}else r()}}var y=function(){var t=[];return function(e,r){return t[e]=r,t.filter(Boolean).join("\n")}}();function b(t,e,r,n){var o=r?"":n.css;if(t.styleSheet)t.styleSheet.cssText=y(e,o);else{var i=document.createTextNode(o),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(i,s[e]):t.appendChild(i)}}},function(t,e,r){"use strict";r.r(e);var n=function(){var t=this.$createElement;return(this._self._c||t)("div",[this._t("default")],2)};function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}n._withStripped=!0;var i={props:{relativeElementSelector:{type:String,required:!0},offset:{type:Object,default:function(){return{top:40,bottom:40}},validator:function(t){if("object"!==o(t))return!1;var e=Object.keys(t);return e.includes("top")&&e.includes("bottom")}},enabled:{type:Boolean,default:!0},scrollAffix:{type:Boolean,default:!1},scrollContainerSelector:{type:String,default:null}},computed:{relativeElement:function(){return document.querySelector(this.relativeElementSelector)},scrollContainer:function(){return this.scrollContainerSelector?document.querySelector(this.scrollContainerSelector):window},affixTopPos:function(){return this.affixRect.top+this.topOfScreen-this.offset.top-this.topPadding},affixBottomPos:function(){return this.affixRect.bottom+this.topOfScreen+this.offset.bottom},bottomOfScreen:function(){return this.topOfScreen+this.scrollContainer.innerHeight},relativeElmTopPos:function(){return this.topOfScreen+this.relativeElement.getBoundingClientRect().top},relativeElmBottomPos:function(){return this.topOfScreen+this.relativeElement.getBoundingClientRect().bottom},screenIsPastAffix:function(){return this.bottomOfScreen>=this.affixBottomPos},screenIsBeforeAffix:function(){return this.topOfScreen<=this.affixTopPos},screenIsBeforeRelativeElm:function(){return this.topOfScreen<=this.relativeElmTopPos-this.offset.top},screenIsPastRelativeElm:function(){return this.bottomOfScreen>=this.relativeElmBottomPos+this.offset.bottom},screenIsInsideRelativeElm:function(){return!this.screenIsBeforeRelativeElm&&!this.screenIsPastRelativeElm}},data:function(){return{frameId:null,affixHeight:null,affixRect:null,affixInitialTop:null,relativeElmOffsetTop:null,topPadding:null,lastState:null,currentState:null,currentScrollAffix:null,topOfScreen:null,lastDistanceFromTop:null,scrollingUp:null,scrollingDown:null}},watch:{offset:function(t,e){t.top===e.top&&t.bottom===e.bottom||this.onScroll()}},methods:{updateData:function(){this.topOfScreen=this.scrollContainer.scrollTop||window.pageYOffset,this.affixRect=this.$el.getBoundingClientRect(),this.affixHeight=this.$el.offsetHeight,this.relativeElmOffsetTop=this.getOffsetTop(this.relativeElement)},handleScroll:function(){var t=this;this.frameId||(this.frameId=window.requestAnimationFrame((function(){t.onScroll(),t.frameId=null})))},onScroll:function(){if(this.enabled)if(this.updateData(),this.affixHeight+this.offset.top>=this.relativeElement.offsetHeight)this.scrollAffix&&"scrollaffix-top"!==this.currentScrollAffix?this.setScrollAffixTop():"affix-top"!==this.currentState&&this.setAffixTop();else{var t=this.affixHeight+this.offset.bottom+this.offset.top;this.scrollAffix&&t>this.scrollContainer.innerHeight?this.handleScrollAffix():this.handleAffix()}else this.removeClasses()},handleAffix:function(){this.topOfScreen<this.relativeElmOffsetTop-this.offset.top&&this.setAffixTop(),this.topOfScreen>=this.relativeElmOffsetTop-this.offset.top&&this.relativeElmBottomPos-this.offset.bottom>=this.topOfScreen+this.topPadding+this.affixHeight+this.offset.top&&this.setAffix(),this.relativeElmBottomPos-this.offset.bottom<this.topOfScreen+this.topPadding+this.affixHeight+this.offset.top&&this.setAffixBottom(),this.lastState=this.currentState},handleScrollAffix:function(){if(this.setScrollingDirection(),this.screenIsBeforeRelativeElm)this.setScrollAffixTop();else if(this.screenIsPastRelativeElm)this.setScrollAffixBottom();else if(this.screenIsInsideRelativeElm){var t="scrollaffix-top"===this.currentScrollAffix||"scrollaffix-bottom"===this.currentScrollAffix||"scrollaffix-up"===this.currentScrollAffix&&this.scrollingDown||"scrollaffix-down"===this.currentScrollAffix&&this.scrollingUp;this.screenIsBeforeAffix&&this.scrollingUp?this.setScrollAffixUp():this.screenIsPastAffix&&this.scrollingDown?this.setScrollAffixDown():t&&this.setScrollAffixScrolling()}this.lastScrollAffixState=this.currentScrollAffix,this.lastDistanceFromTop=this.topOfScreen},initScrollAffix:function(){this.bottomOfScreen<this.affixBottomPos?this.setScrollAffixTop():this.screenIsInsideRelativeElm?this.setScrollAffixDown():this.screenIsPastRelativeElm?this.setScrollAffixBottom():this.setScrollAffixScrolling()},setScrollAffixScrolling:function(){this.currentScrollAffix="scrollaffix-scrolling",this.$el.style.top="".concat(Math.floor(this.affixRect.top)+this.topOfScreen-this.affixInitialTop,"px"),this.$el.style.bottom="auto",this.removeClasses(),this.emitEvent()},setScrollAffixUp:function(){this.currentScrollAffix="scrollaffix-up",this.currentScrollAffix!==this.lastScrollAffixState&&(this.$el.style.top="".concat(this.topPadding+this.offset.top,"px"),this.$el.style.bottom="auto",this.removeClasses(),this.emitEvent(),this.$el.classList.add("affix"))},setScrollAffixDown:function(){this.currentScrollAffix="scrollaffix-down",this.currentScrollAffix!==this.lastScrollAffixState&&(this.$el.style.bottom="".concat(this.offset.bottom,"px"),this.$el.style.top="auto",this.removeClasses(),this.emitEvent(),this.$el.classList.add("affix"))},setScrollAffixTop:function(){this.currentScrollAffix="scrollaffix-top",this.$el.style.top=0,this.$el.style.bottom="auto",this.removeClasses(),this.emitEvent()},setScrollAffixBottom:function(){this.currentScrollAffix="scrollaffix-bottom",this.$el.style.top="".concat(this.relativeElmBottomPos-this.affixInitialTop-this.affixHeight,"px"),this.$el.style.bottom="auto",this.removeClasses(),this.emitEvent()},setScrollingDirection:function(){this.topOfScreen>this.lastDistanceFromTop?(this.scrollingDown=!0,this.scrollingUp=!1):(this.scrollingUp=!0,this.scrollingDown=!1)},setAffixTop:function(){this.currentState="affix-top",this.currentState!==this.lastState&&(this.emitEvent(),this.removeClasses(),this.$el.classList.remove("affix"),this.$el.classList.add("affix-top"),this.$el.style.top=null)},setAffix:function(){this.currentState="affix",this.$el.style.top="".concat(this.topPadding+this.offset.top,"px"),this.currentState!==this.lastState&&(this.emitEvent(),this.removeClasses(),this.$el.classList.add("affix"))},setAffixBottom:function(){this.currentState="affix-bottom",this.$el.style.top="".concat(this.relativeElement.offsetHeight-this.affixHeight-this.offset.bottom-this.topPadding,"px"),this.currentState!==this.lastState&&(this.emitEvent(),this.removeClasses(),this.$el.classList.add("affix-bottom"))},removeClasses:function(){this.$el.classList.remove("affix-top"),this.$el.classList.remove("affix"),this.$el.classList.remove("affix-bottom")},emitEvent:function(){this.scrollAffix&&this.lastScrollAffixState&&this.currentScrollAffix!==this.lastScrollAffixState&&this.$emit(this.currentScrollAffix.replace("-","")),this.lastState&&this.$emit(this.currentState.replace("-",""))},getOffsetTop:function(t){for(var e=0,r=t;r;)e+=r.offsetTop,r=r.offsetParent;return e}},mounted:function(){this.$el.classList.add("vue-affix"),this.affixInitialTop=this.getOffsetTop(this.$el),this.topPadding=this.affixInitialTop-this.getOffsetTop(this.relativeElement),this.updateData(),this.scrollAffix&&this.initScrollAffix(),this.onScroll(),this.scrollContainer.addEventListener("scroll",this.handleScroll)},beforeDestroy:function(){this.scrollContainer.removeEventListener("scroll",this.handleScroll)}};r(5);var s=function(t,e,r,n,o,i,s,a){var c,l="function"==typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=[],l._compiled=!0),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(t,e){return c.call(e),u(t,e)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,c):[c]}return{exports:t,options:l}}(i,n);s.options.__file="affix.vue";var a=s.exports;r.d(e,"Affix",(function(){return a}));var c={install:function(t){c.install.installed||t.component("affix",a)}};"undefined"!=typeof window&&window.Vue&&c.install(window.Vue),e.default=c},,function(t,e,r){"use strict";var n=r(0);r.n(n).a},function(t,e,r){(t.exports=r(1)(!1)).push([t.i,"\n.vue-affix {\n  position: relative;\n}\n.affix {\n  position: fixed;\n}\n.affix-bottom {\n  position: relative;\n}\n",""])}])},168:function(t,e,r){t.exports=function(t){function e(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var r={};return e.m=t,e.c=r,e.i=function(t){return t},e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p=".",e(e.s=10)}([function(t,e){t.exports={"#":{pattern:/\d/},X:{pattern:/[0-9a-zA-Z]/},S:{pattern:/[a-zA-Z]/},A:{pattern:/[a-zA-Z]/,transform:function(t){return t.toLocaleUpperCase()}},a:{pattern:/[a-zA-Z]/,transform:function(t){return t.toLocaleLowerCase()}},"!":{escape:!0}}},function(t,e,r){"use strict";function n(t){var e=document.createEvent("Event");return e.initEvent(t,!0,!0),e}var o=r(2),i=r(0),s=r.n(i);e.a=function(t,e){var i=e.value;if((Array.isArray(i)||"string"==typeof i)&&(i={mask:i,tokens:s.a}),"INPUT"!==t.tagName.toLocaleUpperCase()){var a=t.getElementsByTagName("input");if(1!==a.length)throw new Error("v-mask directive requires 1 input, found "+a.length);t=a[0]}t.oninput=function(e){if(e.isTrusted){var s=t.selectionEnd,a=t.value[s-1];for(t.value=r.i(o.a)(t.value,i.mask,!0,i.tokens);s<t.value.length&&t.value.charAt(s-1)!==a;)s++;t===document.activeElement&&(t.setSelectionRange(s,s),setTimeout((function(){t.setSelectionRange(s,s)}),0)),t.dispatchEvent(n("input"))}};var c=r.i(o.a)(t.value,i.mask,!0,i.tokens);c!==t.value&&(t.value=c,t.dispatchEvent(n("input")))}},function(t,e,r){"use strict";var n=r(6),o=r(5);e.a=function(t,e){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=arguments[3];return Array.isArray(e)?r.i(o.a)(n.a,e,s)(t,e,i,s):r.i(n.a)(t,e,i,s)}},function(t,e,r){"use strict";function n(t){t.component(c.a.name,c.a),t.directive("mask",s.a)}Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),i=r.n(o),s=r(1),a=r(7),c=r.n(a);r.d(e,"TheMask",(function(){return c.a})),r.d(e,"mask",(function(){return s.a})),r.d(e,"tokens",(function(){return i.a})),r.d(e,"version",(function(){return l}));var l="0.11.1";e.default=n,"undefined"!=typeof window&&window.Vue&&window.Vue.use(n)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),o=r(0),i=r.n(o),s=r(2);e.default={name:"TheMask",props:{value:[String,Number],mask:{type:[String,Array],required:!0},masked:{type:Boolean,default:!1},tokens:{type:Object,default:function(){return i.a}}},directives:{mask:n.a},data:function(){return{lastValue:null,display:this.value}},watch:{value:function(t){t!==this.lastValue&&(this.display=t)},masked:function(){this.refresh(this.display)}},computed:{config:function(){return{mask:this.mask,tokens:this.tokens,masked:this.masked}}},methods:{onInput:function(t){t.isTrusted||this.refresh(t.target.value)},refresh:function(t){this.display=t,(t=r.i(s.a)(t,this.mask,this.masked,this.tokens))!==this.lastValue&&(this.lastValue=t,this.$emit("input",t))}}}},function(t,e,r){"use strict";e.a=function(t,e,r){return e=e.sort((function(t,e){return t.length-e.length})),function(n,o){for(var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=0;s<e.length;){var a=e[s];s++;var c=e[s];if(!(c&&t(n,c,!0,r).length>a.length))return t(n,a,i,r)}return""}}},function(t,e,r){"use strict";e.a=function(t,e){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments[3];t=t||"",e=e||"";for(var o=0,i=0,s="";o<e.length&&i<t.length;){var a=n[u=e[o]],c=t[i];a&&!a.escape?(a.pattern.test(c)&&(s+=a.transform?a.transform(c):c,o++),i++):(a&&a.escape&&(u=e[++o]),r&&(s+=u),c===u&&i++,o++)}for(var l="";o<e.length&&r;){var u;if(n[u=e[o]]){l="";break}l+=u,o++}return s+l}},function(t,e,r){var n=r(8)(r(4),r(9),null,null);t.exports=n.exports},function(t,e){t.exports=function(t,e,r,n){var o,i=t=t||{},s=typeof t.default;"object"!==s&&"function"!==s||(o=t,i=t.default);var a="function"==typeof i?i.options:i;if(e&&(a.render=e.render,a.staticRenderFns=e.staticRenderFns),r&&(a._scopeId=r),n){var c=a.computed||(a.computed={});Object.keys(n).forEach((function(t){var e=n[t];c[t]=function(){return e}}))}return{esModule:o,exports:i,options:a}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("input",{directives:[{name:"mask",rawName:"v-mask",value:t.config,expression:"config"}],attrs:{type:"text"},domProps:{value:t.display},on:{input:t.onInput}})},staticRenderFns:[]}},function(t,e,r){t.exports=r(3)}])},169:function(t,e,r){"use strict";var n=r(2),o=r.n(n),i=r(4),s=r(167),a=(r(7),r(8),r(168)),c={9:{pattern:/\d/},"&":{pattern:/\d|,|\.| |\u00a0/},"#":{pattern:/\d| /},S:{pattern:/\d|\//},s:{pattern:/\//},"*":{pattern:/\d|\*|×/,regexpToFind:/\*/g},$:{pattern:/\w/,regexpToFind:/\$/g},"@":{pattern:/7/},"%":{pattern:/8/},A:{pattern:/[а-яА-Яa-zA-Z]/},H:{pattern:/[\dа-яёА-ЯЁ]/},Z:{pattern:/[\dа-яА-Яa-zA-Z]/},E:{pattern:/[a-zA-Z[\];'`{}:"<>~,.\-\s]+|[а-яА-Я\-\sёЁ]+/},D:{pattern:/[a-zA-ZА-Яа-я\\-\\-\\sёЁ ]/},L:{pattern:/\w|[@.]/},P:{pattern:/\w|[+]|\*|×/},U:{pattern:/[авекмнорстухabekmhopctyx\d]/i},C:{pattern:/[авекмнорстухfdtrvyjhcne[]/i},c:{pattern:/[авекмнорстух]/i},R:{pattern:/[А-ЯЁ]/i},X:{pattern:/[A-Z]/i},T:{pattern:/[\dA-Z]/i}};function l(t,e,r){void 0===t&&(t="");for(var n,o,i,s="",a=!1,l="",u=e.length,d=t.length,p=0,f=0,h=!1;p<u&&(f<d||f<u);)o=f<d&&t[f]||"","\\"!==(i=e[p])||h?(n=h?null:c[i],h=!1,n?o.match(n.pattern)?(s+=o,l+=o,p++,f++):f++:r&&o===i?(s+=i,p+=1,f+=1):r?(s+=i,p+=1):(s+=i,p++,o!==i||a?a=!0:f++)):(p++,h=!0);return{maskedValue:s.slice(0,s.length),unmaskedValue:l,maskStep:p,valueStep:f}}var u={name:"InputField",props:{prop:Object},directives:{mask:a.mask},data:function(){return{isRemovingKeyPressed:!1,maskedValue:"",unmaskedValue:""}},created:function(){"tel"===this.prop.type&&(this.update(this.prop.value),this.$store.commit("checkout/UPDATE_PROP_BY_CODE",{code:this.prop.code,message:this.maskedValue}))},computed:{value:function(){return this.$store.state.checkout.props[this.prop.code]||""}},watch:{value:function(t,e){t!==this.maskedValue&&""!==t&&"tel"===this.prop.type&&(this.update(t),this.$store.commit("checkout/UPDATE_PROP_BY_CODE",{code:this.prop.code,message:this.maskedValue}))}},methods:{check:function(){return this.prop.error="",this.prop.required&&""===this.$refs.input.value?this.prop.error="Заполните это поле":"email"!==this.prop.type||this.$refs.input.checkValidity()?"tel"!==this.prop.type||this.$refs.input.checkValidity()?void 0:this.prop.error="Введите верный телефон":this.prop.error="Введите верный email"},isPhone:function(t){return/^(\+(\d+|@)|%|8)/.test(t)||/^7\d{10}$/.test(t)},defineMobileMask:function(t,e){switch(!0){case"+@ (***) ***-**-**"===t&&/\*{4,}/.test(e):return"+@ (***) ***-**-**";case/[a-zA-Z@_.-]/.test(e):return"";case/^\+7|^7/.test(e):return"+@ (LLL) LLL-LL-LL";case/^[349]/.test(e):return"+7 (LLL) LLL-LL-LL";case/^\+?8/.test(e):return"% (LLL) LLL-LL-LL";case/^[01256]/.test(e):return"";case/^[0-9+][^a-zA-Z@_.+-]*$/.test(e):return"PPPPPPPPPPPPPPPPPPPP";default:return!1}},maskPhone:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=/^([0-9]{2})\*{0,6}\d{0,2}/.test(t)||/([0-9]{3})\×{5}\d{2}/.test(t)||/^\d+$/.test(t),o=t;if(n){var i=l(o||"",e||"",r);return console.log(i),this.maskedValue=i.maskedValue,this.unmaskedValue=i.unmaskedValue,i.unmaskedValue||t}this.isPhone(o)||(o="");var s=l(o||"",e||"",r);return console.log(s),this.maskedValue=s.maskedValue,this.unmaskedValue=s.unmaskedValue,s.unmaskedValue},maskingValue:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t&&"tel"===this.prop.type){if(this.isPhone(t))return this.maskPhone(e,t,r);var n=l(e,t,r);return this.maskedValue=n.maskedValue,this.unmaskedValue=n.unmaskedValue,n.unmaskedValue}},update:function(t){var e=this.mask?this.maskingValue(this.mask,t,!0):t,r=this.defineMobileMask(this.mask||"",e);if(r){var n=e||"";this.maskingValue(r,n)}this.mask=r},onInput:function(t){console.log("onInput",t.target.value),this.$store.commit("checkout/UPDATE_PROP_BY_CODE",{code:this.prop.code,message:t.target.value}),"tel"===this.prop.type&&(this.update(t.target.value),this.isRemovingKeyPressed||this.$store.commit("checkout/UPDATE_PROP_BY_CODE",{code:this.prop.code,message:this.maskedValue}))},onKeyUp:function(){this.isRemovingKeyPressed=!1},onKeyDown:function(t){8===t.keyCode?this.isRemovingKeyPressed=!0:46===t.keyCode&&(this.isRemovingKeyPressed=!0)},onFocus:function(){this.prop.error=""}}},d=r(1),p=Object(d.a)(u,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"input-field",class:{"input-field_invalid":t.prop.error}},[r("label",{staticClass:"input-field__label",class:{"input-field__label_active":""!==t.value},attrs:{for:"property-"+t.prop.id}},[t._v(t._s(t.prop.title+(t.prop.required?"*":"")))]),t._v(" "),r("input",{ref:"input",staticClass:"input-field__input",attrs:{id:"property-"+t.prop.id,name:t.prop.name,type:t.prop.type,autocomplete:t.prop.autocomplete,inputmode:t.prop.inputmode,required:t.prop.required},domProps:{value:t.value},on:{keydown:t.onKeyDown,keyup:t.onKeyUp,input:t.onInput,focus:t.onFocus,change:t.check,blur:t.check}}),t._v(" "),r("transition",{attrs:{name:"fade-left"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:t.prop.error,expression:"prop.error"}],staticClass:"input-field__alert"},[t._v(t._s(t.prop.error))])])],1)}),[],!1,null,null,null).exports,f=r(65);function h(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}var m={name:"CheckoutLocation",components:{CheckoutLocationLocked:r(90).a,CheckoutLocationSearch:f.a},computed:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?h(Object(r),!0).forEach((function(e){o()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},Object(i.d)("checkout",{locationName:"locationName"}))},v=Object(d.a)(m,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"n-form-group"},[this.$store.state.isLocaleStore&&this.locationName?e("div",{staticClass:"n-form-group__field"},[e("CheckoutLocationLocked",{attrs:{value:this.locationName}})],1):e("CheckoutLocationSearch",{attrs:{disabled:!this.$store.getters.isRealCity}})],1)}),[],!1,null,null,null).exports,_=r(85).a,y=Object(d.a)(_,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"n-form-row"},[r("div",{staticClass:"col-12"},[r("div",{staticClass:"n-form-group"},[t.isLocaleStore&&t.locationName?r("div",{staticClass:"n-form-group__field"},[r("div",{staticClass:"checkout-location"},[r("div",{staticClass:"checkout-location__name"},[t._v(t._s(t.locationName))]),t._v(" "),r("button",{staticClass:"checkout-location__button",attrs:{type:"button"},on:{click:t.editCity}},[t._v("Изменить")])])]):r("CheckoutLocationSearch")],1)])])}),[],!1,null,"ae10570c",null).exports,b=r(72),g=r(5);function k(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function C(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?k(Object(r),!0).forEach((function(e){o()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var O={name:"CheckoutForm",components:{InputField:p,CheckoutLocation:v,CheckoutAddress:y},directives:{skew:{inserted:function(t,e){var r=e.value,n=void 0===r?10:r;t.style.transform="matrix(1, 0, ".concat(-2*n/158,", 1, 0, 0)"),t.style.marginLeft="".concat(n,"px"),t.style.marginRight="".concat(n,"px")}}},props:{breakpoint:{type:String}},mounted:function(){new b.a(this.$refs.textarea)},watch:{filtredProps:function(t,e){var r=this;(console.log(t,e),"xl"===this.breakpoint)&&(t.length!==e.length&&t.find((function(t){return t.required&&""===t.value&&!r.$store.state.checkout.props[t.code]}))&&g.a.scrollTo(document.getElementById("order-props")))}},computed:C({},Object(i.d)("checkout",{propertyGroups:"propertyGroups",propertyDescription:function(t){return t.props.DESCRIPTION},errors:"errors"}),{},Object(i.c)("checkout",{orderList:"orderList",propertyList:"propertyList"}),{visibleAddress:function(){return this.orderList.find((function(t){return t.deliveryItem&&"pickup"!==t.deliveryItem.category}))},filtredProps:function(){var t=this;return this.propertyList.filter((function(e){return"xl"===t.breakpoint||0===e.relationDelivery.length})).filter((function(e){return"location"!==e.type||t.visibleAddress}))},groups:function(){var t=this;return this.propertyGroups.map((function(e){return C({},e,{props:t.filtredProps.filter((function(t){return t.propsGroupId===e.id}))})})).filter((function(t){return t.props.length}))}}),methods:{updateDescription:function(t){this.$store.commit("checkout/UPDATE_PROP_BY_CODE",{code:"DESCRIPTION",message:t.target.value})}}},E=Object(d.a)(O,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"order-props",attrs:{id:"order-props"}},[r("h3",{staticClass:"order-props__title"},[t._v("Ваши данные")]),t._v(" "),r("div",{staticClass:"order-props__form"},[t.errors.PROPERTY&&t.errors.PROPERTY.length?r("ul",{staticClass:"order-props__error"},t._l(t.errors.PROPERTY,(function(e){return r("li",[t._v(t._s(e))])})),0):t._e(),t._v(" "),t._l(t.groups,(function(e){return r("fieldset",{staticClass:"order-props__group"},[r("legend",{staticClass:"order-props__subtitle"},[t._v(t._s(e.name))]),t._v(" "),t._l(e.props,(function(e){return["location"===e.type?r("CheckoutLocation"):r("div",{staticClass:"n-form-group"},[r("div",{staticClass:"n-form-group__field"},[r("InputField",{class:{"input-field_primary":"xs"!==t.breakpoint},attrs:{prop:e}})],1),t._v(" "),e.description?r("small",{staticClass:"n-form-group__description"},[t._v(t._s(e.description))]):t._e()])]}))],2)})),t._v(" "),r("fieldset",{staticClass:"order-props__description"},[r("div",{directives:[{name:"skew",rawName:"v-skew",value:10,expression:"10"}],staticClass:"form-group"},[r("div",{staticClass:"input-field",class:{"input-field_primary":"xs"!==t.breakpoint}},[r("label",{staticClass:"input-field__label",attrs:{for:"property-description"}},[t._v("Комментарий")]),t._v(" "),r("textarea",{ref:"textarea",staticClass:"input-field__input autoheight",attrs:{id:"property-description",rows:"5"},domProps:{value:t.propertyDescription},on:{input:t.updateDescription}})])]),t._v(" "),r("div",{staticClass:"order-props__note"},[t._v("Например, уточнения по оформлению заказа, номер карты клиента или как найти ваш\n          дом")])])],2),t._v(" "),r("div",{staticClass:"order-props__footer"},[t._t("default")],2)])}),[],!1,null,null,null).exports,S=r(38),P={name:"CheckoutAlert",props:{type:{type:String,default:"multiple"}}},I=Object(d.a)(P,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"order-alert"},["multiple"===t.type?[r("div",{staticClass:"order-alert__title"},[t._v("Внимание! Этот заказ был разделён.")]),t._v(" "),r("div",{staticClass:"order-alert__text"},[t._v("Часть заказа будет отправлена с центрального склада. Вы получите товары разными\n      способами доставки.")])]:"central"===t.type?[r("div",{staticClass:"order-alert__title"},[t._v("Доставка с центрального склада")]),t._v(" "),r("div",{staticClass:"order-alert__text"},[t._v("Этот заказ будет отправлен с центрального склада. Доступна доставка СДЭК или Почтой\n      России.")])]:t._e()],2)}),[],!1,null,null,null).exports;function w(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}var T={name:"CheckoutAmount",computed:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?w(Object(r),!0).forEach((function(e){o()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},Object(i.c)("checkout",{orderList:"orderList"}),{total:function(){return this.orderList.reduce((function(t,e){return t+e.total.ORDER_TOTAL_PRICE}),0)},totalDiscount:function(){return this.orderList.reduce((function(t,e){return t+e.total.DISCOUNT_PRICE}),0)}})},L=Object(d.a)(T,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.total?r("div",{staticClass:"order-amount"},[r("div",{directives:[{name:"show",rawName:"v-show",value:t.totalDiscount>0,expression:"totalDiscount > 0"}],staticClass:"order-amount__sale"},[r("div",{staticClass:"order-amount__key"},[t._v("Ваша скидка")]),t._v(" "),r("div",{staticClass:"order-amount__value"},[t._v(t._s(t._f("formatPrice")(t.totalDiscount)))])]),t._v(" "),r("div",{staticClass:"order-amount__sum"},[r("div",{staticClass:"order-amount__key"},[t._v("Итого к оплате")]),t._v(" "),r("div",{staticClass:"order-amount__value"},[t._v(t._s(t._f("formatPrice")(t.total)))])]),t._v(" "),t.orderList.length>1?t._l(t.orderList,(function(e){return r("div",{key:e.storeId,staticClass:"order-amount__row"},[r("div",{staticClass:"order-amount__key"},[r("span",{staticClass:"order-number-badge",class:{"order-number-badge_dark":e.index%2==1}},[t._v("Отправление "+t._s(e.index))]),t._v(" "),r("span",[t._v(t._s(e.paymentItem?e.paymentItem.name:"Способ оплаты не выбран"))])]),t._v(" "),r("div",{staticClass:"order-amount__value"},[t._v(t._s(t._f("formatPrice")(e.total.ORDER_TOTAL_PRICE)))])])})):t._e()],2):t._e()}),[],!1,null,"fa7778b6",null).exports,x=r(86).a,R=Object(d.a)(x,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"sdek-pickup-modal"},[t._m(0),t._v(" "),r("div",{staticClass:"sdek-pickup-modal__tabs"}),t._v(" "),r("div",{staticClass:"sdek-pickup-modal__tabs",attrs:{role:"tablist"}},[r("a",{staticClass:"sdek-pickup-modal__tab",class:{active:"list"===t.currentTab},attrs:{role:"tab",href:"#sdek-list","aria-controls":"sdek-list"},on:{click:function(e){e.preventDefault(),t.currentTab="list"}}},[t._v("Из списка")]),t._v(" "),r("a",{staticClass:"sdek-pickup-modal__tab",class:{active:"map"===t.currentTab},attrs:{role:"tab",href:"#sdek-map","aria-controls":"sdek-map"},on:{click:function(e){e.preventDefault(),t.currentTab="map"}}},[t._v("Карта")])]),t._v(" "),r("div",{staticClass:"sdek-pickup-modal__container"},[r("div",{directives:[{name:"show",rawName:"v-show",value:"xs"!==t.breakpoint||"map"===t.currentTab,expression:"breakpoint !== 'xs' || currentTab === 'map'"}],staticClass:"sdek-pickup-modal__mask",attrs:{role:"tabpanel",id:"#sdek-map"}},[r("yandex-map",{staticClass:"sdek-pickup-modal__map",attrs:{coords:t.coords},on:{"map-was-initialized":t.mapInit}},t._l(t.cityPointList,(function(e,n){return r("ymap-marker",{key:n,attrs:{"marker-id":n,"hint-content":e.Address,balloon:{body:e.Address},options:{hideIconOnBalloonOpen:!1},coords:[e.cY,e.cX],callbacks:{click:function(){t.onClick(n)}}}})})),1)],1),t._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:"xs"!==t.breakpoint||"list"===t.currentTab,expression:"breakpoint !== 'xs' || currentTab === 'list'"}],staticClass:"sdek-pickup-modal__list",attrs:{role:"tabpanel",id:"#sdek-list"}},[r("div",{staticClass:"sdek-pickup-list"},[r("div",{staticClass:"sdek-pickup-list__header"},[r("div",{staticClass:"sdek-pickup-list__title"},[t._v("Сдэк в "+t._s(t.currentCity))])]),t._v(" "),r("div",{ref:"pickupList",staticClass:"sdek-pickup-list__list"},t._l(t.cityPointList,(function(e,n){return r("div",{key:n,staticClass:"sdek-pickup-item",attrs:{"data-name":n},on:{mouseenter:function(e){return t.onEnter(n)},mouseleave:function(e){return t.onLeave(n)}}},[r("div",{staticClass:"sdek-pickup-item__address"},[t._v(t._s(e.Address))]),t._v(" "),r("div",{staticClass:"sdek-pickup-item__info"},[r("div",[t._v(t._s(e.WorkTime))]),t._v(" "),r("div",[r("a",{attrs:{href:"#"}},[t._v(t._s(e.Phone))])])]),t._v(" "),r("button",{staticClass:"sdek-pickup-item__button",on:{click:function(e){return t.setPoint(n)}}},[t._v("Выбрать")])])})),0)])])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"sdek-pickup-modal__header"},[e("div",{staticClass:"sdek-pickup-modal__title"},[this._v("Выбрать пункт самовывоза")])])}],!1,null,"79d460ee",null).exports,D={name:"CheckoutShippingSDEK",data:function(){return{currentPoint:null}},computed:{cityPointList:function(){return window.IPOLSDEK_pvz?window.IPOLSDEK_pvz.PVZ[window.IPOLSDEK_pvz.city]:{}}},methods:{setPickup:function(t){},selectPickup:function(){var t=this;this.$modal.open(R,{onClose:function(e){if(e){var r=t.cityPointList[e];r&&(t.currentPoint=r,t.$store.state.checkout.props.sdekPickup="".concat(window.IPOLSDEK_pvz.city,", ").concat(r.Address," #S").concat(e))}},props:{cityPointList:this.cityPointList}})}}},j=Object(d.a)(D,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"o-shipping-sdek-pickup"},[t.currentPoint?[r("div",{staticClass:"o-shipping-sdek-pickup__address"},[t._v(t._s(t.currentPoint.Address))]),t._v(" "),r("div",{staticClass:"o-shipping-sdek-pickup__info"},[r("div",[t._v(t._s(t.currentPoint.WorkTime))]),t._v(" "),r("div",[r("a",{attrs:{href:"tel:"+t.currentPoint.Phone}},[t._v(t._s(t.currentPoint.Phone))])])])]:t._e(),t._v(" "),r("button",{staticClass:"o-shipping-sdek-pickup__button",attrs:{type:"button"},on:{click:t.selectPickup}},[t._v(t._s(t.currentPoint?"Изменить":"Выбрать")+" пункт самовывоза")])],2)}),[],!1,null,"1cac6e20",null).exports,A=r(64);function M(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}var N={name:"CheckoutShippingPickup",props:{order:{type:Object,required:!0}},computed:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?M(Object(r),!0).forEach((function(e){o()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},Object(i.c)({getStoreById:"getStoreById"}),{groupStore:function(){var t=this;return this.order.groupStore.map((function(e){return t.getStoreById(e)})).filter((function(t){return t}))}}),methods:{setStore:function(t){this.$store.dispatch("checkout/".concat(S.d),{storeId:t.id,order:this.order})},showOnMap:function(t){this.$modal.open(A.a,{props:{storeId:t.id}})}},mounted:function(){this.order.groupStore.length>0&&this.order.groupStore.indexOf(this.order.storeId)<0&&this.$store.dispatch("checkout/".concat(S.d),{storeId:this.order.groupStore[0],order:this.order})}};function $(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function B(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?$(Object(r),!0).forEach((function(e){o()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var U={name:"CheckoutShippingAndPayment",components:{InputField:p,CheckoutAlert:I,CheckoutAmount:L,CheckoutAddress:y,CheckoutShippingSDEK:j,CheckoutShippingPickup:Object(d.a)(N,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ul",{staticClass:"o-shipping-pickup"},t._l(t.groupStore,(function(e){return r("li",{staticClass:"o-shipping-pickup__item"},[r("input",{staticClass:"o-shipping-pickup__input",attrs:{name:"storeId",type:"radio",id:"pickup-"+e.id,required:""},domProps:{checked:e.id===t.order.storeId,value:e.id},on:{change:function(r){return t.setStore(e)}}}),t._v(" "),r("label",{staticClass:"o-shipping-pickup__label",attrs:{for:"pickup-"+e.id}},[r("span",{staticClass:"o-shipping-pickup__address"},[t._v(t._s(e.name))]),t._v(" "),r("a",{staticClass:"o-shipping-pickup__link",attrs:{href:"#"},on:{click:function(r){return r.preventDefault(),t.showOnMap(e)}}},[t._v("Показать на карте")])])])})),0)}),[],!1,null,"04be62f0",null).exports},props:{breakpoint:{type:String}},computed:B({},Object(i.d)("checkout",{errors:"errors"}),{},Object(i.c)("checkout",{orderList:"orderList",propertyList:"propertyList"}),{multiple:function(){return this.orderList.length>1},fromCentralStock:function(){return 1===this.orderList.length&&!this.orderList[0].isLocaleStore}}),methods:B({},Object(i.b)("checkout",{selectPayment:S.b,selectShipping:S.c,removeOrder:S.a}),{getPropsByDeliveryId:function(t){return this.propertyList.filter((function(e){return e.relationDelivery.find((function(e){return e===t}))}))}})},F=Object(d.a)(U,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"order-sap",attrs:{id:"order-delivery"}},[t.multiple?r("CheckoutAlert",{attrs:{type:"multiple"}}):t.fromCentralStock?r("CheckoutAlert",{attrs:{type:"central"}}):t._e(),t._v(" "),t._l(t.orderList,(function(e){return r("div",{staticClass:"order-shiping"},[t.multiple?[r("div",{staticClass:"order-shiping__header"},[r("div",{staticClass:"order-shiping__name"},[t._v("Отправление "+t._s(e.index))]),t._v(" "),r("button",{staticClass:"order-shiping__btn-delete",attrs:{type:"button"},on:{click:function(r){return t.removeOrder(e)}}},[r("i",{staticClass:"icon icon-delete"}),t._v("\n          "+t._s("Удалить"+("xl"===t.breakpoint?" отправление":""))+"\n        ")])]),t._v(" "),r("div",{staticClass:"order-shiping__quantity"},[t._v(t._s(e.quantityText))]),t._v(" "),r("div",{staticClass:"order-shiping__list"},t._l(e.productList,(function(e){return r("div",{key:e.basketItemId,staticClass:"order-mini-product"},[r("div",{staticClass:"order-mini-product__photo"},[r("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.picture,expression:"product.picture"}],staticClass:"order-mini-product__img",attrs:{"data-srcset":e.picture2x+" 2x",alt:e.name}})]),t._v(" "),r("div",{staticClass:"order-mini-product__caption"},[t._v(t._s(e.quantity+" "+(e.measureName||"шт")))])])})),0)]:t._e(),t._v(" "),r("div",{staticClass:"order-shiping__shipping-type"},[t.errors.DELIVERY&&t.errors.DELIVERY.length?t._l(t.errors.DELIVERY,(function(e){return r("div",{staticClass:"order-shiping__error"},[t._v("\n          "+t._s(e)+"\n        ")])})):t._e(),t._v(" "),e.errors&&e.errors.length?t._l(e.errors,(function(e){return r("div",{staticClass:"order-shiping__error"},[t._v("\n          "+t._s(e)+"\n        ")])})):t._e(),t._v(" "),r("h3",{staticClass:"order-shiping__title"},[t._v("Способ получения")]),t._v(" "),t._l(e.deliveryMethods,(function(n){return r("div",{key:n.id,staticClass:"order-option",class:{active:n.id===e.deliveryId}},[r("div",{staticClass:"order-option__header",on:{click:function(r){return t.selectShipping({id:n.id,order:e})}}},[r("div",{staticClass:"order-option__row-top"},[n.logoUrl?r("img",{staticClass:"order-option__icon",attrs:{src:n.logoUrl,alt:n.name}}):t._e(),t._v(" "),r("div",{staticClass:"order-option__name"},[t._v(t._s(n.name))])]),t._v(" "),r("div",{staticClass:"order-option__row-bottom"},[n.ownName?r("div",{staticClass:"order-option__own-name"},[t._v(t._s(n.ownName))]):t._e(),t._v(" "),0===n.price?r("div",{staticClass:"order-option__price green"},[t._v("Бесплатно")]):r("div",{staticClass:"order-option__price"},[t._v(t._s(n.priceFormated))]),t._v(" "),n.period?r("div",{staticClass:"order-option__period"},[t._v(t._s(n.period))]):t._e()])]),t._v(" "),r("div",{staticClass:"order-option__body"},[n.period?r("div",{staticClass:"order-option__subtitle"},[t._v("Сроки доставки: "+t._s(n.period))]):t._e(),t._v(" "),n.description?r("p",{staticClass:"order-option__description",domProps:{innerHTML:t._s(n.description)}}):t._e(),t._v(" "),"pickup"!==n.category&&"xl"!==t.breakpoint?[r("div",{staticClass:"order-option__subtitle"},[t._v("Адрес доставки")]),t._v(" "),t._l(t.getPropsByDeliveryId(n.id),(function(e){return r("div",{staticClass:"n-form-group"},[r("div",{staticClass:"n-form-group__field"},[r("InputField",{attrs:{prop:e}})],1),t._v(" "),e.description?r("small",{staticClass:"n-form-group__description"},[t._v(t._s(e.description))]):t._e()])}))]:t._e(),t._v(" "),"sdek.pickup"===n.category?r("CheckoutShippingSDEK"):t._e(),t._v(" "),"pickup"===n.category?r("CheckoutShippingPickup",{attrs:{order:e}}):t._e()],2)])}))],2),t._v(" "),r("div",{staticClass:"order-shiping__payment-type"},[t._l(t.errors.PAY_SYSTEM,(function(e){return r("div",{staticClass:"order-shiping__error"},[t._v(t._s(e))])})),t._v(" "),r("h3",{staticClass:"order-shiping__title"},[t._v("Способ оплаты")]),t._v(" "),t._l(e.paymentMethods,(function(n){return r("div",{key:n.id,staticClass:"order-option",class:{active:n.id===e.paymentId}},[r("div",{staticClass:"order-option__header",on:{click:function(r){return t.selectPayment({id:n.id,order:e})}}},[r("div",{staticClass:"order-option__row-top"},[r("div",{staticClass:"order-option__name"},[t._v(t._s(n.name))])]),t._v(" "),r("div",{staticClass:"order-option__row-bottom"},[r("div",{staticClass:"order-option__description",domProps:{innerHTML:t._s(n.description)}}),t._v(" "),n.isCash?t._e():r("div",[r("i",{staticClass:"icon icon-visa"}),t._v(" "),r("i",{staticClass:"icon icon-mastercard"}),t._v(" "),r("i",{staticClass:"icon icon-mir"})])])])])}))],2)],2)})),t._v(" "),r("div",{staticClass:"order-sap__amount"},[r("CheckoutAmount")],1),t._v(" "),r("div",{staticClass:"order-sap__footer"},[t._t("default")],2)],2)}),[],!1,null,null,null).exports,H=r(27),Y=r.n(H),V={name:"ProductItem",props:{item:{type:Object,required:!0}},computed:{basketItem:function(){return this.$store.getters["cart/getBasketItemById"](this.item.basketItemId)}},created:function(){this.debouncedSetQuantity=Y()(this.setQuantity,300)},methods:{remove:function(){this.$store.dispatch("cart/removeFromCart",{basketItemId:this.item.basketItemId})},increment:function(){this.basketItem&&this.item.quantity<this.basketItem.quantity_max&&(this.item.quantity+=1,this.debouncedSetQuantity())},decrement:function(){this.item.quantity>0&&(this.item.quantity-=1,this.debouncedSetQuantity())},setQuantity:function(){this.$store.dispatch("cart/setItemQuantity",{basketItemId:this.item.basketItemId,quantity:this.item.quantity})}}};function q(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}var z={name:"ProductList",components:{ProductItem:Object(d.a)(V,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"order-product"},[r("a",{staticClass:"order-product__col-image",attrs:{href:t.item.url,title:t.item.name,target:"_blank"}},[r("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.item.picture,expression:"item.picture"}],staticClass:"order-product__img",attrs:{"data-srcset":t.item.picture2x+" 2x",alt:t.item.name}})]),t._v(" "),r("div",{staticClass:"order-product__col-info"},[r("a",{staticClass:"order-product__name",attrs:{href:t.item.url,target:"_blank"},domProps:{textContent:t._s(t.item.previewName)}}),t._v(" "),t._l(t.item.props,(function(e){return r("div",{staticClass:"order-product__description"},[t._v(t._s(e.VALUE))])}))],2),t._v(" "),r("div",{staticClass:"order-product__col-count"},[r("div",{staticClass:"order-product__counter"},[r("button",{staticClass:"order-product__decrement",attrs:{type:"button",disabled:t.item.quantity<1},domProps:{textContent:t._s("-")},on:{click:function(e){return e.preventDefault(),t.decrement(t.item)}}}),t._v(" "),r("div",{staticClass:"order-product__quantity"},[t._v(t._s(t.item.quantity))]),t._v(" "),r("button",{staticClass:"order-product__increment",attrs:{type:"button",disabled:!t.basketItem||t.item.quantity>=t.basketItem.quantity_max},domProps:{textContent:t._s("+")},on:{click:function(e){return e.preventDefault(),t.increment(t.item)}}})]),t._v(" "),r("div",{staticClass:"order-product__count-note"},[t._v(t._s(t._f("formatPrice")(t.item.priceBase))+"/"+t._s(t.item.measureName||"шт"))])]),t._v(" "),r("div",{staticClass:"order-product__col-price"},[t.item.price_benefit>0?r("del",{staticClass:"order-product__old-price"},[t._v(t._s(t._f("formatPrice")(t.item.sumBase)))]):t._e(),t._v(" "),r("div",{staticClass:"order-product__price"},[t._v(t._s(t._f("formatPrice")(t.item.sum)))]),t._v(" "),t.item.price_benefit>0?r("div",{staticClass:"order-product__profit"},[t._v("Выгода "+t._s(t._f("formatPrice")(t.item.sumDiscount)))]):t._e()]),t._v(" "),r("button",{staticClass:"order-product__btn-delete",attrs:{title:"Удалить из корзины"},on:{click:function(e){return e.preventDefault(),t.remove(t.item)}}},[r("svg",{attrs:{width:"18",height:"20",viewBox:"0 0 18 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[r("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5.67041 0H12.5289V2.54197H17.6368V4.46043H0.5625V2.54197H5.67041V0ZM7.58888 1.91847V2.54197H10.6105V1.91847H7.58888ZM2.86418 20V6.28298H4.78265V18.0815H13.4157V6.28298H15.3342V20H2.86418ZM8.14052 6.28298H6.22206V16.4149H8.14052V6.28298ZM10.0592 6.28298H11.9777V16.4149H10.0592V6.28298Z",fill:"currentColor"}})])])])}),[],!1,null,null,null).exports},props:{multiple:{type:Boolean,default:!1},order:{type:Object}},computed:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?q(Object(r),!0).forEach((function(e){o()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},Object(i.d)("checkout",{total:"total"}),{},Object(i.c)({currentCity:"currentCity"}),{textDeliveryLocal:function(){var t=this.$store.getters.getStoreById(this.order.storeId),e=t?"Магазин на ".concat(t.name):"Магазин рядом";if(this.order.deliveryItem){if("pickup"===this.order.deliveryItem.category)return"".concat(e,", самовывоз");if(this.order.deliveryItem.period)return"".concat(e,", ").concat(this.order.deliveryItem.period)}return e},textDeliveryCentral:function(){var t=this.currentCity?"Со склада из СПБ в ".concat(this.currentCity.name):"С центрального склада";return this.order.deliveryItem&&this.order.deliveryItem.period?"".concat(t,", ").concat(this.order.deliveryItem.period):t}})},G=Object(d.a)(z,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"order-item"},[t.order.isLocaleStore?r("div",{staticClass:"order-item__header order-item__header_local"},[r("div",{staticClass:"order-item__title"},[t._v(t._s(t.textDeliveryLocal))]),t._v(" "),r("div",{staticClass:"order-number-badge"},[t._v("Отправление "+t._s(t.order.index))])]):r("div",{staticClass:"order-item__header order-item__header_central"},[r("div",{staticClass:"order-item__title"},[t._v(t._s(t.textDeliveryCentral))]),t._v(" "),r("div",{staticClass:"order-number-badge"},[t._v("Отправление "+t._s(t.order.index))])]),t._v(" "),r("transition-group",{staticClass:"order-item__list",attrs:{tag:"div",name:"slide"}},t._l(t.order.productList,(function(t){return r("div",{key:t.basketItemId,staticClass:"order-item__product"},[r("ProductItem",{attrs:{item:t}})],1)})),0),t._v(" "),t.order.total?r("div",{staticClass:"order-item__amount"},[r("div",{staticClass:"order-item__row"},[r("div",{staticClass:"order-item__key"},[t._v("Товары")]),t._v(" "),r("div",{staticClass:"order-item__value"},[r("small",{staticClass:"gray"},[t._v(t._s(t.order.quantityText))]),t._v(" "),r("b",[t._v(t._s(t.order.total.ORDER_PRICE_FORMATED))])])]),t._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:t.order.deliveryItem,expression:"order.deliveryItem"}],staticClass:"order-item__row"},[r("div",{staticClass:"order-item__key"},[t._v("Доставка")]),t._v(" "),r("div",{staticClass:"order-item__value"},[t.order.total.DELIVERY_PRICE>0?r("b",[t._v(t._s(t.order.total.DELIVERY_PRICE_FORMATED))]):r("b",[t._v("Бесплатно")])])]),t._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:t.order.total.DISCOUNT_PRICE>0,expression:"order.total.DISCOUNT_PRICE > 0"}],staticClass:"order-item__row"},[r("div",{staticClass:"order-item__key"},[t._v("Скидка")]),t._v(" "),r("div",{staticClass:"order-item__value"},[r("b",{staticClass:"red"},[t._v(t._s(t.order.total.DISCOUNT_PRICE_FORMATED))])])]),t._v(" "),t.multiple&&t.order.paymentItem?r("div",{staticClass:"order-item__row"},[r("div",{staticClass:"order-item__key"},[t._v("Оплата")]),t._v(" "),r("div",{staticClass:"order-item__value"},[t._v(t._s(t.order.paymentItem.name))])]):t._e()]):t._e()],1)}),[],!1,null,null,null).exports;function Z(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}var K={name:"Promocode",data:function(){return{isActive:document.documentElement.clientWidth>=768,promocode:"",status:null}},methods:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Z(Object(r),!0).forEach((function(e){o()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Z(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},Object(i.b)({enterCoupon:"checkout/enterCoupon"}),{setPromocode:function(){var t=this;if(this.status="loading",""===this.promocode)return this.status="failed",void setTimeout((function(){t.status=null}),300);this.enterCoupon(this.promocode).then((function(){t.status="success"})).catch((function(){t.status="failed",setTimeout((function(){t.status=null}),1e3)}))}})};function W(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Q(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?W(Object(r),!0).forEach((function(e){o()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):W(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var X={name:"CheckoutBasket",components:{CheckoutAlert:I,CheckoutAmount:L,ProductList:G,Promocode:Object(d.a)(K,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"order-promocode"},[r("button",{staticClass:"order-promocode__btn-toggle btn btn-block btn-skew",class:{"btn-black":t.isActive,"btn-gray-2":!t.isActive},attrs:{type:"button"},on:{click:function(e){t.isActive=!t.isActive}}},[t._v("\n    Добавить промокод\n  ")]),t._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:t.isActive,expression:"isActive"}],staticClass:"order-promocode__body"},[r("div",{staticClass:"n-form-row"},[r("div",{staticClass:"col-12 col-md-8"},[r("div",{staticClass:"n-form-group"},[r("div",{staticClass:"n-form-group__field"},[r("div",{staticClass:"input-field input-field_primary-white"},[r("label",{staticClass:"input-field__label"},[t._v("Добавить промокод")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.promocode,expression:"promocode"}],staticClass:"input-field__input",attrs:{type:"text",autocomplete:"off",disabled:"success"===t.status},domProps:{value:t.promocode},on:{input:function(e){e.target.composing||(t.promocode=e.target.value)}}})])])])]),t._v(" "),r("div",{staticClass:"col-12 col-md-4"},["loading"===t.status?r("button",{staticClass:"order-promocode__btn-submit btn btn-skew btn-block btn-gray-2",attrs:{type:"button"}},[r("span",{staticClass:"spinner-border spinner-border-sm",attrs:{role:"status"}})]):"success"===t.status?r("button",{staticClass:"order-promocode__btn-submit btn btn-skew btn-block btn-green",attrs:{type:"button"}},[r("svg",{attrs:{width:"16",height:"14",viewBox:"0 0 16 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[r("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.5588 3.06065L5.49816 13.1213L0.4375 8.06065L2.55882 5.93933L5.49816 8.87867L13.4375 0.939331L15.5588 3.06065Z",fill:"currentColor"}})])]):"failed"===t.status?r("button",{staticClass:"order-promocode__btn-submit btn btn-skew btn-block btn-red",attrs:{type:"button"}},[t._v("\n          Ошибка\n        ")]):r("button",{staticClass:"order-promocode__btn-submit btn btn-skew btn-block btn-gray-2",attrs:{type:"button"},on:{click:t.setPromocode}},[t._v("\n          Применить\n        ")])])])])])}),[],!1,null,null,null).exports},props:{breakpoint:{type:String}},data:function(){return{isMobile:document.documentElement.clientWidth<768}},computed:Q({},Object(i.d)("checkout",{checkoutStatus:"checkoutStatus"}),{},Object(i.c)("checkout",{nextStepButton:"nextStepButton",orderList:"orderList",totalQuantity:"totalQuantity",totalQuantityText:"totalQuantityText"})),methods:Q({},Object(i.b)({clear:"checkout/clearCheckout",setStep:"checkout/setStep"}))},J=Object(d.a)(X,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"order"},[r("h3",{staticClass:"order__title"},[t._v(t._s(t.isMobile?t.totalQuantityText:"В заказе "+t.totalQuantityText))]),t._v(" "),r("div",{staticClass:"order__header"},[r("button",{staticClass:"order__btn-clear",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.clear(e)}}},[r("svg",{attrs:{width:"12",height:"14",viewBox:"0 0 12 14",xmlns:"http://www.w3.org/2000/svg"}},[r("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.57554 0H8.3765V1.77938H11.952V3.1223H0V1.77938H3.57554V0ZM4.91846 1.34292V1.77938H7.03357V1.34292H4.91846ZM1.60906 14V4.39808H2.95198V12.6571H8.99514V4.39808H10.3381V14H1.60906ZM5.3047 4.39808H3.96178V11.4904H5.3047V4.39808ZM6.64632 4.39808H7.98924V11.4904H6.64632V4.39808Z",fill:"currentColor"}})]),t._v(" "),r("span",[t._v("Очистить корзину")])])]),t._v(" "),t.isMobile&&t.orderList.length>0?r("div",{staticClass:"order__alert"},[t.orderList.length>1?r("CheckoutAlert",{attrs:{type:"multiple"}}):t.orderList[0].isLocaleStore?t._e():r("CheckoutAlert",{attrs:{type:"central"}})],1):t._e(),t._v(" "),r("div",{staticClass:"order__list"},t._l(t.orderList,(function(e){return r("ProductList",{key:e.storeId,attrs:{order:e,multiple:t.orderList.length>1}})})),1),t._v(" "),r("div",{staticClass:"order__promocode"},[r("Promocode")],1),t._v(" "),r("div",{staticClass:"order__amount"},[r("CheckoutAmount")],1),t._v(" "),r("div",{staticClass:"order__footer"},[r("div",{staticClass:"order__btn-checkout"},[t._t("default")],2),t._v(" "),t._m(0)])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"order__footer-note"},[this._v("\n        Нажимая на кнопку, вы подтверждаете согласие на обработку\n        "),e("a",{attrs:{href:"#"}},[this._v("персональных данных")]),this._v(" и "),e("a",{attrs:{href:"/policy-privacy/"}},[this._v("политику конфиденциальности")])])}],!1,null,"e4df6b90",null).exports,tt={name:"CheckoutFinal"},et=Object(d.a)(tt,(function(){var t=this.$createElement;this._self._c;return this._m(0)}),[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"checkout-final"},[r("h3",{staticClass:"checkout-final__title"},[t._v("Заказ оформлен, его номер:")]),t._v(" "),r("p",{staticClass:"checkout-final__number"},[t._v("1354315")]),t._v(" "),r("p",{staticClass:"checkout-final__description"},[t._v("\n      Подробная информация о заказе отправлена на вашу почту\n      "),r("a",{staticClass:"link",attrs:{href:"mailto:konstantinopolsky@gmail.com"}},[t._v("konstantinopolsky@gmail.com")]),t._v("."),r("br"),t._v("\n      В ближайшее время с вами свяжется менеджер для уточнения деталей заказа.\n    ")]),t._v(" "),r("ul",{staticClass:"checkout-final-info"},[r("li",{staticClass:"checkout-final-info__item"},[r("span",{staticClass:"gray"},[t._v("Доставка:")]),t._v(" "),r("span",[t._v("самовывоз из магазина на")]),t._v(" "),r("a",{staticClass:"link-underline",attrs:{href:"javascript:;","data-marker-id":"82955"}},[t._v("ул. Подводников, 31")])]),t._v(" "),r("li",{staticClass:"checkout-final-info__item"},[r("span",{staticClass:"gray"},[t._v("Оплата: ")]),t._v(" "),r("span",[t._v("наличными при получении")])])]),t._v(" "),r("div",{staticClass:"checkout-final-pay"},[r("h3",{staticClass:"checkout-final-pay__title"},[t._v("оплатите заказ онлайн")]),t._v(" "),r("div",{staticClass:"checkout-final-pay__row"},[r("button",{staticClass:"btn btn-red btn-skew"},[t._v("Оплатить заказ")]),t._v(" "),r("span",{staticClass:"checkout-final-pay-logo"},[r("i",{staticClass:"icon icon-visa"}),t._v(" "),r("i",{staticClass:"icon icon-mastercard"}),t._v(" "),r("i",{staticClass:"icon icon-mir"})])])]),t._v(" "),r("div",{staticClass:"checkout-final-order checkout-final-order_card"},[r("h3",{staticClass:"checkout-final-order__title"},[t._v("Отправление 1")]),t._v(" "),r("ul",{staticClass:"checkout-final-info"},[r("li",{staticClass:"checkout-final-info__item"},[r("span",{staticClass:"gray"},[t._v("Доставка:")]),t._v(" "),r("span",[t._v("почтой по адресу г. Москва, ул. Мясницкая, д.15")])]),t._v(" "),r("li",{staticClass:"checkout-final-info__item"},[r("span",{staticClass:"gray"},[t._v("Оплата: ")]),t._v(" "),r("span",[t._v("картой онлайн")])])]),t._v(" "),r("ul",{staticClass:"checkout-final-order__total"},[r("li",{staticClass:"checkout-final-order__item"},[r("span",{staticClass:"gray"},[t._v("Стоимость товаров:")]),t._v(" "),r("span",{staticClass:"price"},[t._v("5 000 ₽")])]),t._v(" "),r("li",{staticClass:"checkout-final-order__item"},[r("span",{staticClass:"gray"},[t._v("Доставка:")]),t._v(" "),r("span",{staticClass:"price"},[t._v("300 ₽")])]),t._v(" "),r("li",{staticClass:"checkout-final-order__item checkout-final-order__item_sum"},[r("span",{staticClass:"gray"},[t._v("Сумма к оплате:")]),t._v(" "),r("span",{staticClass:"price"},[t._v("5 300 ₽")])])]),t._v(" "),r("div",{staticClass:"checkout-final-order__footer"},[r("button",{staticClass:"btn btn-red btn-skew"},[t._v("Оплатить заказ")]),t._v(" "),r("span",{staticClass:"checkout-final-pay-logo"},[r("i",{staticClass:"icon icon-visa"}),t._v(" "),r("i",{staticClass:"icon icon-mastercard"}),t._v(" "),r("i",{staticClass:"icon icon-mir"})])])]),t._v(" "),r("div",{staticClass:"checkout-final-order"},[r("h3",{staticClass:"checkout-final-order__title"},[t._v("Отправление 2")]),t._v(" "),r("ul",{staticClass:"checkout-final-info"},[r("li",{staticClass:"checkout-final-info__item"},[r("span",{staticClass:"gray"},[t._v("Доставка:")]),t._v(" "),r("span",[t._v("самовывоз из магазина на")]),t._v(" "),r("a",{staticClass:"link-underline",attrs:{href:"javascript:;","data-marker-id":"82955"}},[t._v("ул. Подводников, 31")])]),t._v(" "),r("li",{staticClass:"checkout-final-info__item"},[r("span",{staticClass:"gray"},[t._v("Оплата: ")]),t._v(" "),r("span",[t._v("наличными при получении")])])]),t._v(" "),r("ul",{staticClass:"checkout-final-order__total"},[r("li",{staticClass:"checkout-final-order__item"},[r("span",{staticClass:"gray"},[t._v("Стоимость товаров:")]),t._v(" "),r("span",{staticClass:"price"},[t._v("5 000 ₽")])]),t._v(" "),r("li",{staticClass:"checkout-final-order__item"},[r("span",{staticClass:"gray"},[t._v("Доставка:")]),t._v(" "),r("span",{staticClass:"price"},[t._v("300 ₽")])]),t._v(" "),r("li",{staticClass:"checkout-final-order__item checkout-final-order__item_sum"},[r("span",{staticClass:"gray"},[t._v("Сумма к оплате:")]),t._v(" "),r("span",{staticClass:"price"},[t._v("5 300 ₽")])])])]),t._v(" "),r("p",{staticClass:"checkout-final__description"},[t._v("\n      Обращаем ваше внимание, что товары, присутствующие в заказе,\n      "),r("strong",[t._v("ставятся в бронь на срок от 1 до 3 дней.")]),r("br"),t._v("\n      Точное время бронирования, а также все подробности о вашем заказе, вы можете уточнить по телефону выбранного\n      магазина.\n    ")]),t._v(" "),r("div",{staticClass:"checkout-final-map"},[r("div",{staticClass:"checkout-final-map__container"},[r("div",{staticClass:"checkout-final-map__map",attrs:{id:"map"}})]),t._v(" "),r("div",{staticClass:"checkout-final-map__col"},[r("p",{staticClass:"checkout-final-map__description"},[r("strong",[t._v("Добраться на машине:")]),r("br"),t._v("\n          проезжаете по ул. Белинского до ТЦ «Этажи», паркуетесь на большой стоянке у торгового центра - с нее будет\n          видно нашу вывеску в цоколе серой новостройки.\n        ")]),t._v(" "),r("p",{staticClass:"checkout-final-map__description"},[r("strong",[t._v("Добраться пешком:")]),r("br"),t._v('\n          от остановки "Полтавская" - проходите вдоль улицы до ТЦ "Этажи". Выйдя на большую стоянку ТЦ "Этажи" увидите\n          нашу вывеску - в цокольном этаже серой новостройки.\n        ')])])])])}],!1,null,null,null).exports,rt={name:"CheckoutFinal",mounted:function(){var t=document.querySelector(".p-section-popular");t&&(t.style.display="")}},nt=Object(d.a)(rt,(function(){var t=this.$createElement;this._self._c;return this._m(0)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"cart-empty"},[e("div",{staticClass:"container"},[e("h3",{staticClass:"cart-empty__title"},[this._v("Ваша корзина пуста")]),this._v(" "),e("p",{staticClass:"cart-empty__description"},[this._v("Добавьте покупки, чтобы начать оформление заказа")]),this._v(" "),e("a",{staticClass:"cart-empty__button btn btn-red btn-skew",attrs:{href:"/catalog/"}},[this._v("Начать покупать")])])])}],!1,null,null,null).exports;function ot(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function it(t){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)}var st={name:"Checkout",components:{Affix:s.Affix,CheckoutForm:E,CheckoutShippingAndPayment:F,CheckoutBasket:J,CheckoutFinal:et,CheckoutEmptyBasket:nt,CheckoutShippingSDEK:j,CheckoutLocationSearch:f.a},data:function(){return{currentStep:"basket",visibleFooter:!0,breakpoint:"xs",steps:[{key:"basket",next:"form",title:"Корзина",nextButtonText:"Перейти к оформлению"},{key:"form",next:"shipping-and-payment",title:"Ваши данные",nextButtonText:"Доставка и оплата"},{key:"shipping-and-payment",next:"final",title:"Доставка и оплата",nextButtonText:"Оформить заказ"},{key:"final",next:"basket",title:"Финал",nextButtonText:"Оплатить заказ"}]}},computed:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ot(Object(r),!0).forEach((function(e){o()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ot(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},Object(i.d)({checkoutStatus:function(t){return t.checkout.checkoutStatus}}),{},Object(i.c)({basketItems:"cart/availableProducts",totalQuantity:"checkout/totalQuantity",propertyList:"checkout/propertyList"}),{currentTabComponent:function(){return"checkout-".concat(this.currentStep)},nextStepName:function(){switch(this.currentStep){case"basket":return"form";case"form":return"shipping-and-payment";case"shipping-and-payment":return"final";default:return"basket"}},nextStepButtonText:function(){switch(this.currentStep){case"basket":return"Перейти к оформлению";case"form":return"Доставка и оплата";case"shipping-and-payment":default:return"Оформить заказ"}}}),methods:{getBreakpoint:function(){return document.documentElement.clientWidth<768?"xs":document.documentElement.clientWidth<1240?"md":"xl"},validateFirstStep:function(){var t=this,e=!1;return this.propertyList.forEach((function(r){if("xl"===t.breakpoint||0===r.relationDelivery.length){var n=t.$store.state.checkout.props[r.code];if(r.required&&""===n)return r.error="Заполните это поле",void(e=!0);"email"!==r.type||it(n)||(r.error="Введите верный email",e=!0)}})),e},validateSecondStep:function(){var t=this,e=!1;return this.$store.state.checkout.orderList.forEach((function(r){if(r.errors=[],r.deliveryId){var n=r.deliveryMethods.find((function(t){return t.id===r.deliveryId}));"sdek.pickup"!==n.category||t.$store.state.checkout.props.sdekPickup||r.errors.push("Не выбран пункт самовывоза"),"pickup"!==n.category||r.groupStore.find((function(t){return t===r.storeId}))||r.errors.push("Не выбран пункт самовывоза"),r.paymentId||r.errors.push("Не выбран метод оплаты")}else r.errors.push("Не выбран способ доставки");r.errors.length&&(e=!0)})),this.propertyList.forEach((function(r){if("xl"!==t.breakpoint&&0!==r.relationDelivery.length){var n=t.$store.state.checkout.props[r.code];if(r.required&&""===n)return r.error="Заполните это поле",void(e=!0);"email"===r.type&&it(n)&&(r.error="Введите верный email",e=!0)}})),e},nextStep:function(){this.setStep(this.nextStepName)},setStep:function(t){switch(t){case"final":if(this.validateFirstStep()){this.currentStep="form",g.a.scrollTo(document.querySelector(".cart"));break}if(this.validateSecondStep()){g.a.scrollTo(document.querySelector(".cart")),this.currentStep="shipping-and-payment";break}this.$store.dispatch("checkout/checkout");break;case"shipping-and-payment":if(this.validateFirstStep()){g.a.scrollTo(document.querySelector(".cart")),this.currentStep="form";break}g.a.scrollTo(document.querySelector(".cart")),this.currentStep=t;break;default:g.a.scrollTo(document.querySelector(".cart")),this.currentStep=t}},checkout:function(){console.log("checkout"),this.validateFirstStep()?g.a.scrollTo(document.getElementById("order-props")):this.validateSecondStep()?g.a.scrollTo(document.getElementById("order-delivery")):this.$store.dispatch("checkout/checkout")}},created:function(){this.$store.dispatch("checkout/init")},mounted:function(){var t=this;this.breakpoint=this.getBreakpoint(),document.addEventListener("resize",(function(){t.breakpoint=t.getBreakpoint()})),document.addEventListener("scroll",(function(){t.$refs.test&&(t.visibleFooter=t.$refs.test.getBoundingClientRect().top>document.documentElement.clientHeight)}))}},at=Object(d.a)(st,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("header",{staticClass:"cart-section-header"},[r("div",{staticClass:"container"},[r("nav",{staticClass:"mr-breadcumps",attrs:{"aria-label":"Хлебные крошки"}},[r("ol",{staticClass:"mr-breadcumps__list",attrs:{itemscope:"",itemtype:"https://schema.org/BreadcrumbList"}},[t._m(0),t._v(" "),r("li",{staticClass:"mr-breadcumps__item",attrs:{itemprop:"itemListElement",itemscope:"",itemtype:"https://schema.org/ListItem","aria-current":"page"}},[r("span",{attrs:{itemprop:"name"}},[t._v(t._s("basket"===t.currentStep?"Корзина":"Оформление заказа"))]),t._v(" "),r("meta",{attrs:{itemprop:"position",content:"2"}})])])]),t._v(" "),r("h1",{staticClass:"cart-section-header__title"},[t._v("\n        "+t._s("basket"===t.currentStep?"Корзина":"Оформление заказа")+"\n      ")])])]),t._v(" "),r("section",{staticClass:"cart",class:{cart_loading:"loading"===t.checkoutStatus}},["initialization"===t.checkoutStatus?r("div",{staticClass:"cart-loading"},[t._m(1)]):0===t.totalQuantity||0===t.basketItems.length?r("CheckoutEmptyBasket"):"xl"===t.breakpoint?[r("div",{staticClass:"container"},[r("div",{staticClass:"cart__inner"},[r("div",{staticClass:"cart__col-left"},[r("CheckoutForm",{attrs:{breakpoint:t.breakpoint}}),t._v(" "),r("CheckoutShippingAndPayment",{attrs:{breakpoint:t.breakpoint}})],1),t._v(" "),r("div",{staticClass:"cart__col-right"},[r("Affix",{staticStyle:{width:"690px"},attrs:{"relative-element-selector":".cart__inner",scrollAffix:!0,offset:{top:150,bottom:15}}},[r("CheckoutBasket",{attrs:{breakpoint:t.breakpoint}},[r("button",{staticClass:"btn btn-red btn-skew btn-block",attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.checkout(e)}}},[t._v("Оформить заказ")])])],1)],1)])])]:["basket"!==t.currentStep?r("ul",{staticClass:"cart-mobile-header"},t._l(t.steps,(function(e){return"basket"!==e.key?r("li",{key:e.key,class:["cart-mobile-header__item",{active:t.currentStep===e.key}]},[r("a",{staticClass:"cart-mobile-header__link",attrs:{href:"#"},on:{click:function(r){return r.preventDefault(),t.setStep(e.key)}}},[t._v(t._s(e.title))])]):t._e()})),0):t._e(),t._v(" "),r("div",{staticClass:"container"},[r("keep-alive",[r(t.currentTabComponent,{tag:"component",attrs:{breakpoint:t.breakpoint}},[r("button",{ref:"test",staticClass:"btn btn-red btn-skew btn-block",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.nextStep(e)}}},[t._v("\n              "+t._s(t.nextStepButtonText)+"\n              "),"basket"!==t.currentStep?r("svg",{staticClass:"btn-icon",staticStyle:{"margin-left":"25px",width:"20px",height:"16px"},attrs:{viewBox:"0 0 20 16",xmlns:"http://www.w3.org/2000/svg"}},[r("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M13.3431 0.928881L19.7071 7.29284C20.0976 7.68337 20.0976 8.31653 19.7071 8.70706L13.3431 15.071C12.9526 15.4615 12.3195 15.4615 11.9289 15.071C11.5384 14.6805 11.5384 14.0473 11.9289 13.6568L16.5858 8.99995L-7.31201e-07 8.99995L-5.56355e-07 6.99995L16.5858 6.99995L11.9289 2.34309C11.5384 1.95257 11.5384 1.31941 11.9289 0.928881C12.3195 0.538356 12.9526 0.538356 13.3431 0.928881Z",fill:"currentColor"}})]):t._e()])])],1)],1),t._v(" "),r("div",{staticClass:"cart-mobile-bottom",class:{active:t.visibleFooter}},[r("button",{staticClass:"btn btn-red btn-block",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.nextStep(e)}}},[t._v("\n          "+t._s(t.nextStepButtonText)+"\n          "),"basket"!==t.currentStep?r("svg",{staticClass:"btn-icon",staticStyle:{"margin-left":"25px",width:"20px",height:"16px"},attrs:{viewBox:"0 0 20 16",xmlns:"http://www.w3.org/2000/svg"}},[r("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M13.3431 0.928881L19.7071 7.29284C20.0976 7.68337 20.0976 8.31653 19.7071 8.70706L13.3431 15.071C12.9526 15.4615 12.3195 15.4615 11.9289 15.071C11.5384 14.6805 11.5384 14.0473 11.9289 13.6568L16.5858 8.99995L-7.31201e-07 8.99995L-5.56355e-07 6.99995L16.5858 6.99995L11.9289 2.34309C11.5384 1.95257 11.5384 1.31941 11.9289 0.928881C12.3195 0.538356 12.9526 0.538356 13.3431 0.928881Z",fill:"currentColor"}})]):t._e()])])]],2)])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("li",{staticClass:"mr-breadcumps__item",attrs:{itemprop:"itemListElement",itemscope:"",itemtype:"https://schema.org/ListItem"}},[e("a",{attrs:{itemprop:"item",href:"/"}},[e("span",{staticClass:"red",attrs:{itemprop:"name"}},[this._v("Главная")])]),this._v(" "),e("meta",{attrs:{itemprop:"position",content:"1"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"spinner-border",attrs:{role:"status"}},[e("span",{staticClass:"sr-only"},[this._v("Загрузка...")])])}],!1,null,null,null);e.a=at.exports},266:function(t,e,r){"use strict";r.r(e),function(t){var e=r(13),n=r.n(e),o=(r(47),r(165));n()((function(){t.PageCheckout=new o.a,t.PageCheckout.init()}))}.call(this,r(16))},267:function(t,e,r){var n=function(t){"use strict";var e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",s=n.toStringTag||"@@toStringTag";function a(t,e,r,n){var o=e&&e.prototype instanceof u?e:u,i=Object.create(o.prototype),s=new C(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return E()}for(r.method=o,r.arg=i;;){var s=r.delegate;if(s){var a=b(s,r);if(a){if(a===l)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=c(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,s),i}function c(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=a;var l={};function u(){}function d(){}function p(){}var f={};f[o]=function(){return this};var h=Object.getPrototypeOf,m=h&&h(h(O([])));m&&m!==e&&r.call(m,o)&&(f=m);var v=p.prototype=u.prototype=Object.create(f);function _(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function y(t){var e;this._invoke=function(n,o){function i(){return new Promise((function(e,i){!function e(n,o,i,s){var a=c(t[n],t,o);if("throw"!==a.type){var l=a.arg,u=l.value;return u&&"object"==typeof u&&r.call(u,"__await")?Promise.resolve(u.__await).then((function(t){e("next",t,i,s)}),(function(t){e("throw",t,i,s)})):Promise.resolve(u).then((function(t){l.value=t,i(l)}),(function(t){return e("throw",t,i,s)}))}s(a.arg)}(n,o,e,i)}))}return e=e?e.then(i,i):i()}}function b(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=c(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function g(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(g,this),this.reset(!0)}function O(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return d.prototype=v.constructor=p,p.constructor=d,p[s]=d.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s in t||(t[s]="GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},_(y.prototype),y.prototype[i]=function(){return this},t.AsyncIterator=y,t.async=function(e,r,n,o){var i=new y(a(e,r,n,o));return t.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},_(v),v[s]="Generator",v[o]=function(){return this},v.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=O,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return s.type="throw",s.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var a=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(a&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=t,s.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}(t.exports);try{regeneratorRuntime=n}catch(t){Function("r","regeneratorRuntime = r")(n)}},268:function(t,e){t.exports=function(t){if(Array.isArray(t))return t}},269:function(t,e){t.exports=function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var r=[],n=!0,o=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!e||r.length!==e);n=!0);}catch(t){o=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return r}}},270:function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},279:function(t,e,r){"use strict";var n=r(2),o=r.n(n),i=r(4),s=r(49),a=r(12),c=r.n(a),l=r(28),u=r.n(l);function d(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function p(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?d(Object(r),!0).forEach((function(e){o()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var f={name:"CheckoutPopular",components:{ProductCard:s.a},props:{requestParam:{type:Object}},data:function(){return{collapsed:!0,items:[],status:null}},computed:p({},Object(i.c)({basketItems:"cart/availableProducts",totalQuantity:"checkout/totalQuantity"}),{products:function(){return this.items.filter((function(t){return"product"===t.type})).map((function(t){return t.options}))}}),methods:{showMore:function(){this.collapsed=!1},sendRequest:function(){var t=this;this.status="loading";var e=p({},this.requestParam);return c.a.post("/ajax/catalog/products/by-params/",u.a.stringify(e)).then((function(t){return t.data})).then((function(t){if(t.success)return t;var e=new Error(t.message);throw e.response=t,e})).then((function(e){t.items=e.data.items})).catch((function(t){})).finally((function(){t.status=null}))}},mounted:function(){this.sendRequest()},created:function(){}},h=r(1);Object(h.a)(f,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",{directives:[{name:"show",rawName:"v-show",value:t.items.length>0&&(0===t.totalQuantity||0===t.basketItems.length),expression:"items.length > 0 && (totalQuantity === 0 || basketItems.length === 0)"}],staticClass:"p-section-popular"},[t._m(0),t._v(" "),r("div",{staticClass:"product-list"},[r("div",{staticClass:"product-list__wrapper",class:{collapsed:t.collapsed}},t._l(t.products,(function(t){return r("ProductCard",{key:t.id,attrs:{product:t}})})),1),t._v(" "),r("div",{staticClass:"product-list__container"},[t.products.length>4?r("div",{directives:[{name:"show",rawName:"v-show",value:t.collapsed,expression:"collapsed"}],staticClass:"load-more-block"},[r("button",{staticClass:"load-more-block__link",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.showMore(e)}}},[t._v("Показать еще")])]):t._e()])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container"},[e("h2",{staticClass:"p-section-popular__title"},[this._v("Популярные товары")])])}],!1,null,null,null).exports},33:function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function s(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function a(t){return(t.icon.color||"blue")+(t.icon.glyph?c(t.icon.glyph):t.icon.content?"Stretchy":"")}function c(t){return t.charAt(0).toUpperCase()+t.slice(1)}function l(t){return t.map((function(t){return Array.isArray(t)?l(t):+t}))}function u(t,e){var r=[];return function t(e,o){if(e===o)return!0;if(e instanceof Date&&o instanceof Date)return+e==+o;if("object"!==n(e)||"object"!==n(o))return!1;if(function(t,e){for(var n=r.length;n--;)if(!(r[n][0]!==t&&r[n][0]!==e||r[n][1]!==e&&r[n][1]!==t))return!0;return!1}(e,o))return!0;r.push([e,o]);var i=Object.keys(e),s=i.length;if(Object.keys(o).length!==s)return!1;for(;s--;)if(!t(e[i[s]],o[i[s]]))return!1;return!0}(t,e)}function d(t,e,r){u(t,e)||(r.rerender&&clearTimeout(r.rerender),r.rerender=setTimeout((function(){return r.updateMap&&r.updateMap()}),10))}r.d(e,"a",(function(){return g})),r.d(e,"b",(function(){return k}));var p=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.events={},this.ymapReady=!1,this.scriptIsNotAttached=!0}var e,r;return e=t,(r=[{key:"$on",value:function(t,e){var r=this;return this.events[t]||(this.events[t]=[]),this.events[t].push(e),function(){r.events[t]=r.events[t].filter((function(t){return e!==t}))}}},{key:"$emit",value:function(t,e){var r=this.events[t];r&&r.forEach((function(t){return t(e)}))}}])&&o(e.prototype,r),t}()),f=["fullscreenControl","geolocationControl","routeEditor","rulerControl","searchControl","trafficControl","typeSelector","zoomControl","routePanelControl"];function h(t){return 0===t.filter((function(t){return![].concat(f,["default"]).includes(t)})).length}function m(t,e){var r=c(t);if(!e)return r;switch(r){case"Placemark":return"Point";case"Polyline":return"LineString";default:return r}}function v(t,e){var r=e?{type:"Feature",id:t.properties.markerId,geometry:{type:t.markerType,coordinates:t.coords},properties:t.properties,options:t.options}:new ymaps[t.markerType](t.coords,t.properties,t.options);return r.clusterName=t.clusterName,e||function(t,e){if(t&&"object"===n(t))for(var r in t)e.events.add(r,t[r])}(t.callbacks,r),r}var _={pluginOptions:{},data:function(){return{ymapEventBus:p,ymapId:"yandexMap"+Math.round(1e5*Math.random()),myMap:{},style:this.ymapClass?"":"width: 100%; height: 100%;"}},props:{coords:{type:Array,validator:function(t){return!t.filter((function(t){return isNaN(t)})).length},required:!0},zoom:{validator:function(t){return!isNaN(t)},default:18},clusterOptions:{type:Object,default:function(){return{}}},clusterCallbacks:{type:Object,default:function(){return{}}},behaviors:{type:Array,default:function(){return["default"]}},controls:{type:Array,default:function(){return["default"]},validator:function(t){return h(t)}},detailedControls:{type:Object,validator:function(t){return h(Object.keys(t))}},scrollZoom:{type:Boolean,default:!0},zoomControl:Object,mapType:{type:String,default:"map",validator:function(t){return["map","satellite","hybrid"].includes(t)}},placemarks:{type:Array,default:function(){return[]}},useObjectManager:{type:Boolean,default:!1},objectManagerClusterize:{type:Boolean,default:!0},ymapClass:String,initWithoutMarkers:{type:Boolean,default:!0},mapLink:String,debug:{type:Boolean,default:!1},settings:{type:Object,default:function(){return{}}},options:{type:Object,default:function(){return{}}}},computed:{coordinates:function(){return this.coords.map((function(t){return+t}))}},methods:{getMarkersFromSlots:function(){return this.$slots.default&&this.$slots.default.map((function(t){var e=t.componentOptions&&t.componentOptions.propsData;if(e){var r={};e.balloonTemplate&&(r={balloonContentLayout:ymaps.templateLayoutFactory.createClass(e.balloonTemplate)});var n={markerId:e.markerId,markerType:e.markerType||"placemark",coords:l(e.coords),hintContent:e.hintContent,markerFill:e.markerFill,circleRadius:+e.circleRadius,clusterName:e.clusterName,markerStroke:e.markerStroke,balloon:e.balloon,callbacks:e.callbacks,properties:e.properties,options:e.options,balloonOptions:r};return e.icon&&["default#image","default#imageWithContent"].includes(e.icon.layout)?(n.iconContent=e.icon.content,n.iconLayout=e.icon.layout,n.iconImageHref=e.icon.imageHref,n.iconImageSize=e.icon.imageSize,n.iconImageOffset=e.icon.imageOffset,n.iconContentOffset=e.icon.contentOffset,e.icon.contentLayout&&"string"==typeof e.icon.contentLayout&&(n.iconContentLayout=ymaps.templateLayoutFactory.createClass(e.icon.contentLayout))):n.icon=e.icon,n}})).filter((function(t){return t&&t.markerType}))||[]},createMarkers:function(){for(var t=this,e=[],r=this.getMarkersFromSlots(),n=0;n<r.length;n++){var o=r[n],i=m(o.markerType,this.useObjectManager),s={hintContent:o.hintContent,iconContent:o.icon&&o.icon.content||o.iconContent,markerId:o.markerId},c=o.balloon?{balloonContentHeader:o.balloon.header,balloonContentBody:o.balloon.body,balloonContentFooter:o.balloon.footer}:{},l=Object.assign(s,c,o.properties),u=o.iconLayout?{iconLayout:o.iconLayout,iconImageHref:o.iconImageHref,iconImageSize:o.iconImageSize,iconImageOffset:o.iconImageOffset,iconContentOffset:o.iconContentOffset,iconContentLayout:o.iconContentLayout}:{preset:o.icon&&"islands#".concat(a(o),"Icon")},d=o.markerStroke?{strokeColor:o.markerStroke.color||"0066ffff",strokeOpacity:parseFloat(o.markerStroke.opacity)>=0?parseFloat(o.markerStroke.opacity):1,strokeStyle:o.markerStroke.style,strokeWidth:parseFloat(o.markerStroke.width)>=0?parseFloat(o.markerStroke.width):1}:{},p=o.markerFill?{fill:o.markerFill.enabled||!0,fillColor:o.markerFill.color||"0066ff99",fillOpacity:parseFloat(o.markerFill.opacity)>=0?parseFloat(o.markerFill.opacity):1,fillImageHref:o.markerFill.imageHref||""}:{},f=Object.assign(u,d,p,o.balloonOptions,o.options);"Circle"===i&&(o.coords=[o.coords,o.circleRadius]);var h=v({properties:l,options:f,markerType:i,coords:o.coords,clusterName:o.clusterName,callbacks:o.callbacks},this.useObjectManager);e.push(h)}return this.placemarks&&this.placemarks.forEach((function(r){var n=r.markerType,o=void 0===n?"Placemark":n,i=r.properties,s=r.options,a=void 0===s?{}:s,c=r.coords,l=r.clusterName,u=r.callbacks,d=r.balloonTemplate,p=m(o,t.useObjectManager);if(d){var f=ymaps.templateLayoutFactory.createClass(d);a.balloonContentLayout=f}var h=v({properties:i,options:a,markerType:p,coords:c,clusterName:l,callbacks:u},t.useObjectManager);e.push(h)})),e},setMarkers:function(){var t={options:this.clusterOptions,callbacks:this.clusterCallbacks,map:this.myMap,useObjectManager:this.useObjectManager,objectManagerClusterize:this.objectManagerClusterize};!function(t,e){var r=e.options,n=e.callbacks,o=e.map,i=e.useObjectManager,a=e.objectManagerClusterize,c={},l=[],u=!0,d=!1,p=void 0;try{for(var f,h=t[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var m=f.value;m.clusterName?c[m.clusterName]=c[m.clusterName]?[].concat(s(c[m.clusterName]),[m]):[m]:l.push(m)}}catch(t){d=!0,p=t}finally{try{u||null==h.return||h.return()}finally{if(d)throw p}}for(var v in c){var _=r[v]||{},y=n[v]||{},b=_.layout||"\n      <div>{{ properties.balloonContentHeader }}</div>\n      <div>{{ properties.balloonContentBody }}</div>\n      <div>{{ properties.balloonContentFooter }}</div>\n    ";_.clusterBalloonItemContentLayout=ymaps.templateLayoutFactory.createClass(b);var g=_.clusterLayout?ymaps.templateLayoutFactory.createClass(_.clusterLayout):_.clusterBalloonContentLayout||"cluster#balloonTwoColumns";_.clusterBalloonContentLayout=g;var k=_.clusterIconContentLayout;if(_.clusterIconContentLayout=k&&ymaps.templateLayoutFactory.createClass(k),i){var C=new ymaps.ObjectManager(Object.assign({clusterize:a},_));for(var O in y)C.clusters.events.add(O,y[O]);C.add(c[v]),o.geoObjects.add(C)}else{var E=new ymaps.Clusterer(_);for(var S in y)E.events.add(S,y[S]);_.createCluster&&(E.createCluster=_.createCluster),E.add(c[v]),o.geoObjects.add(E)}}if(l.length){var P=i?new ymaps.ObjectManager({clusterize:!1}):new ymaps.GeoObjectCollection;l.forEach((function(t){return P.add(t)})),o.geoObjects.add(P)}}(this.createMarkers(),t)},init:function(){var t=this;window.ymaps&&ymaps.GeoObjectCollection&&(this.initWithoutMarkers||this.$slots.default||this.placemarks.length)&&(this.$emit("map-initialization-started"),this.myMap=new ymaps.Map(this.ymapId,{center:this.coordinates,zoom:+this.zoom,behaviors:this.behaviors,controls:this.controls,type:"yandex#".concat(this.mapType)},this.options),this.myMap.events.add("click",(function(e){return t.$emit("click",e)})),this.zoomControl&&(this.myMap.controls.remove("zoomControl"),this.myMap.controls.add(new ymaps.control.ZoomControl(this.zoomControl))),this.detailedControls&&Object.keys(this.detailedControls).forEach((function(e){t.myMap.controls.remove(e),t.myMap.controls.add(e,t.detailedControls[e])})),!1===this.scrollZoom&&this.myMap.behaviors.disable("scrollZoom"),this.setMarkers(),this.$emit("map-was-initialized",this.myMap))}},watch:{coordinates:function(t){this.myMap.panTo&&this.myMap.panTo(t)},placemarks:function(){window.ymaps&&(this.myMap.geoObjects&&this.myMap.geoObjects.removeAll(),this.setMarkers())},zoom:function(){this.myMap.setZoom(this.zoom)}},render:function(t){return t("section",{class:"ymap-container",ref:"mapContainer"},[t("div",{attrs:{id:this.ymapId,class:this.ymapClass,style:this.style}}),t("div",{ref:"markersContainer",attrs:{class:"ymap-markers"}},[this.$slots.default])])},mounted:function(){var t=this;this.markerObserver=new MutationObserver(function(){this.myMap.geoObjects&&this.myMap.geoObjects.removeAll(),this.setMarkers()}.bind(this)),this.mapObserver=new MutationObserver(function(){this.myMap.container.fitToViewport()}.bind(this));var e=this.$refs,r=e.markersContainer,n=e.mapContainer;if(this.markerObserver.observe(r,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),this.mapObserver.observe(n,{attributes:!0,childList:!0,characterData:!0,subtree:!1}),this.ymapEventBus.scriptIsNotAttached){var o=document.createElement("SCRIPT"),s=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable})))),n.forEach((function(e){i(t,e,r[e])}))}return t}({},this.$options.pluginOptions,this.settings),a=s.apiKey,c=void 0===a?"":a,l=s.lang,u=void 0===l?"ru_RU":l,d=s.version,p=void 0===d?"2.1":d,f=s.coordorder,h=void 0===f?"latlong":f,m=this.debug?"debug":"release",v="lang=".concat(u).concat(c&&"&apikey=".concat(c),"&mode=").concat(m,"&coordorder=").concat(h),_=this.mapLink||"https://api-maps.yandex.ru/".concat(p,"/?").concat(v);o.setAttribute("src",_),o.setAttribute("async",""),o.setAttribute("defer",""),document.body.appendChild(o),this.ymapEventBus.scriptIsNotAttached=!1,o.onload=function(){t.ymapEventBus.ymapReady=!0,t.ymapEventBus.$emit("scriptIsLoaded")}}this.ymapEventBus.ymapReady?ymaps.ready(this.init):this.ymapEventBus.$on("scriptIsLoaded",(function(){t.ymapEventBus.updateMap=function(){t.myMap.geoObjects&&t.myMap.geoObjects.removeAll(),t.setMarkers()},ymaps.ready(t.init)}))},beforeDestroy:function(){this.myMap.geoObjects&&this.myMap.geoObjects.removeAll(),this.markerObserver.disconnect()}},y=["placemark","polyline","rectangle","polygon","circle"],b={data:function(){return{ymapEventBus:p,unwatchArr:[]}},props:{coords:{type:Array,required:!0,validator:function(t){return!t.filter((function(t){return isNaN(t)})).length}},hintContent:String,icon:Object,balloon:Object,markerType:{type:String,validator:function(t){return y.includes(t.toLowerCase())},default:"placemark"},markerFill:Object,markerStroke:Object,clusterName:String,circleRadius:{validator:function(t){return!isNaN(t)},default:1e3},callbacks:Object,balloonTemplate:String,markerId:{type:[String,Number],required:!0},properties:Object,options:Object},render:function(){},mounted:function(){var t=this;for(var e in this.$props)this.unwatchArr.push(this.$watch(e,(function(e,r){return d(e,r,t.ymapEventBus)})))},beforeDestroy:function(){this.unwatchArr.forEach((function(t){return t()}))}};_.install=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_.pluginOptions=e,t.component("yandex-map",_),t.component("ymap-marker",b)},"undefined"!=typeof window&&window.Vue&&window.Vue.use(_);var g=_,k=b},38:function(t,e,r){"use strict";(function(t){r.d(e,"c",(function(){return g})),r.d(e,"b",(function(){return k})),r.d(e,"d",(function(){return C})),r.d(e,"a",(function(){return O})),r.d(e,"f",(function(){return E})),r.d(e,"e",(function(){return T}));var n=r(21),o=r.n(n),i=r(46),s=r.n(i),a=r(166),c=r.n(a),l=r(66),u=r.n(l),d=r(2),p=r.n(d),f=r(12),h=r.n(f),m=r(6),v=r(18),_=r(5);function y(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function b(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?y(Object(r),!0).forEach((function(e){p()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var g="SET_SELECTED_SHIPPING_METHOD_ID",k="SET_SELECTED_PAYMENT_METHOD_ID",C="SET_SELECTED_STORE_ID",O="REMOVE_ORDER",E={siteID:"",ajaxUrl:"/local/components/custom/sale.order.ajax/ajax.php",signedParamsString:"",locale:{},result:[]};function S(t){return t.sort((function(t,e){var r=parseInt(t.SORT,10)-parseInt(e.SORT,10);if(0===r){if(t.NAME.toLowerCase()>e.NAME.toLowerCase())return 1;if(t.NAME.toLowerCase()<e.NAME.toLowerCase())return-1}return r})).map((function(t){return{id:parseInt(t.ID,10),name:t.NAME,checked:"Y"===t.CHECKED,description:t.DESCRIPTION,isCash:"Y"===t.IS_CASH}}))}function P(t){return Object.values(t).sort((function(t,e){var r=parseInt(t.SORT,10)-parseInt(e.SORT,10);if(0===r){if(t.OWN_NAME.toLowerCase()>e.OWN_NAME.toLowerCase())return 1;if(t.OWN_NAME.toLowerCase()<e.OWN_NAME.toLowerCase())return-1}return r})).map((function(t){return{id:parseInt(t.ID,10),errors:t.CALCULATE_ERRORS,checked:"Y"===t.CHECKED,price:parseFloat(t.PRICE),priceFormated:t.PRICE_FORMATED,name:t.NAME||"",ownName:t.OWN_NAME||"",description:t.DESCRIPTION||"",period:t.PERIOD_TEXT||"",type:t.TYPE,logoUrl:t.LOGOTIP?t.LOGOTIP.SRC:"",category:t.CATEGORY}})).filter((function(t){return!t.errors}))}function I(t){return{PRICE_WITHOUT_DISCOUNT:parseFloat(t.PRICE_WITHOUT_DISCOUNT_VALUE),PRICE_WITHOUT_DISCOUNT_FORMATED:t.PRICE_WITHOUT_DISCOUNT,ORDER_TOTAL_PRICE:parseFloat(t.ORDER_TOTAL_PRICE),ORDER_TOTAL_PRICE_FORMATED:t.ORDER_TOTAL_PRICE_FORMATED,DELIVERY_PRICE:parseFloat(t.DELIVERY_PRICE),DELIVERY_PRICE_FORMATED:t.DELIVERY_PRICE_FORMATED,DISCOUNT_PRICE:parseFloat(t.DISCOUNT_PRICE),DISCOUNT_PRICE_FORMATED:t.DISCOUNT_PRICE_FORMATED,ORDER_PRICE:parseFloat(t.ORDER_PRICE),ORDER_PRICE_FORMATED:t.ORDER_PRICE_FORMATED}}function w(t){return Object.keys(t).map((function(e){var r=t[e].data;return{basketItemId:parseInt(r.ID,10),productId:parseInt(r.PRODUCT_ID,10),name:r.NAME,previewName:r.PREVIEW_TEXT,props:r.PROPS.filter((function(t){return"SIZE"!==t.CODE&&"STORE_ID"!==t.CODE})),canBuy:"Y"===r.CAN_BUY,quantity:parseInt(r.QUANTITY,10),price:parseFloat(r.PRICE),priceBase:parseFloat(r.BASE_PRICE),price_benefit:parseFloat(r.DISCOUNT_PRICE),sum:parseFloat(r.SUM_NUM),sumBase:parseFloat(r.SUM_BASE),sumDiscount:parseFloat(r.SUM_BASE)-parseFloat(r.SUM_NUM),url:r.DETAIL_PAGE_URL,picture:r.DETAIL_PICTURE_SRC,picture2x:r.DETAIL_PICTURE_SRC_2X,measureName:r.MEASURE_NAME}}))}function T(e){var r,n;E.locations=e.locations,E.siteID=e.siteID,E.ajaxUrl=e.ajaxUrl,E.signedParamsString=e.signedParamsString,E.result=e.result,E.basketHasRemoteProducts=e.basketHasRemoteProducts;var i,a,l,d,f={totalQuantity:function(t){return t.orderList.reduce((function(t,e){return t+e.productList.length}),0)},totalQuantityText:function(t,e){return"".concat(e.totalQuantity," ").concat(_.a.declOfNum(e.totalQuantity,["товар","товара","товаров"]))},propertyList:function(t){var e=[];return t.orderList.forEach((function(t){t.props.forEach((function(t){e.find((function(e){return e===t.id}))||e.push(t.id)}))})),e.map((function(e){return t.propertyList.find((function(t){return t.id===e}))}))},orderList:function(t){return t.orderList.map((function(t){return b({},t,{quantity:t.productList.length,quantityText:"".concat(t.productList.length," ").concat(_.a.declOfNum(t.productList.length,["товар","товара","товаров"])),paymentItem:t.paymentMethods.find((function(e){return e.id===t.paymentId})),deliveryItem:t.deliveryMethods.find((function(e){return e.id===t.deliveryId}))})}))},getAllFormData:function(t,e){return function(r){var n=e.orderList.find((function(t){return t.id===r})),o={DELIVERY_ID:n.deliveryId,PAY_SYSTEM_ID:n.paymentId,PERSON_TYPE:t.personTypeId,ORDER_DESCRIPTION:t.props.DESCRIPTION,action:"saveOrderAjax",location_type:"code",sessid:_.a.sessid()};return n.props.forEach((function(e){o["ORDER_PROP_".concat(e.id)]=t.props[e.code]||""})),n.deliveryItem&&("sdek.pickup"===n.deliveryItem.category&&(o.ORDER_PROP_5=t.props.sdekPickup),"sdek"===n.deliveryItem.category&&(o.ORDER_PROP_5="".concat(t.props.STREET,", ").concat(t.props.HOUSE,", ").concat(t.props.FLAT))),o}}},y=(r={init:(d=u()(s.a.mark((function t(r){var n,o,i,a,l,u,d,p,f,h,m,y,b,g,k,C,O;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.commit,o=r.dispatch,i=r.rootState,n("SET_PARAM",e.result),n("SET_CHECKOUT_STATUS","initialization"),a=[],e.result.ORDER_PROP&&(o("SET_PROPERTY_GROUPS",e.result.ORDER_PROP.groups),o("SET_PROPERTY_LIST",e.result.ORDER_PROP.properties)),e.result.SHOW_EMPTY_BASKET||(l="Y"===e.result.LOCAL_STORE,u=P(e.result.DELIVERY),d=u.find((function(t){return t.checked}))||null,p=S(e.result.PAY_SYSTEM),f=d?p.find((function(t){return t.checked})):null,a.unshift({id:2,index:2,errors:[],storeId:i.storeId,total:I(e.result.TOTAL),productList:w(e.result.GRID.ROWS),groupStore:e.groupStore||[],isLocaleStore:l,deliveryMethods:u,paymentMethods:p,deliveryId:d?d.id:null,paymentId:f?f.id:null,props:e.result.ORDER_PROP.properties.map((function(t){return{id:parseInt(t.ID,10),code:t.CODE}}))})),!e.basketHasRemoteProducts){t.next=23;break}return h={order:{sessid:_.a.sessid(),action:"saveOrderAjax",location_type:"code"},via_ajax:"Y",action:"refreshOrderAjax",SITE_ID:e.siteID,signedParamsString:e.signedParamsString,sessid:_.a.sessid(),storeId:i.storeRemoteId},e.result.ORDER_PROP.properties.forEach((function(t){var e=c()(t.VALUE,1);h.order["ORDER_PROP_".concat(t.ID)]=e[0]})),t.next=11,v.d(e.ajaxUrl,h);case 11:if(!(m=t.sent).redirect){t.next=14;break}return t.abrupt("return");case 14:y=m.order,b=m.groupStore,e.result=[e.result,y],g=P(y.DELIVERY),k=g.find((function(t){return t.checked}))||null,C=S(y.PAY_SYSTEM),O=k?C.find((function(t){return t.checked})):null,o("SET_PROPERTY_GROUPS",y.ORDER_PROP.groups),o("SET_PROPERTY_LIST",y.ORDER_PROP.properties),a.unshift({id:1,index:1,errors:[],storeId:i.storeRemoteId,isLocaleStore:!1,productList:w(y.GRID.ROWS),total:I(y.TOTAL),groupStore:b||[],deliveryMethods:g,paymentMethods:C,deliveryId:k?k.id:null,paymentId:O?O.id:null,props:y.ORDER_PROP.properties.map((function(t){return{id:parseInt(t.ID,10),code:t.CODE}}))});case 23:n("SET_ORDER_LIST",a),n("SET_CHECKOUT_STATUS",null);case 25:case"end":return t.stop()}}),t)}))),function(t){return d.apply(this,arguments)}),refreshOrder:function(t,e){var r=t.commit,n=t.dispatch;e.forEach((function(t){var e=t.order,o=t.groupStore,i=t.oldOrderData;if(t.redirect)n(O,i);else if(e){e.SHOW_AUTH&&console.error(e.ERROR),n("SET_PROPERTY_GROUPS",e.ORDER_PROP.groups),n("SET_PROPERTY_LIST",e.ORDER_PROP.properties);var s=P(e.DELIVERY),a=s.find((function(t){return t.checked}))||null,c=S(e.PAY_SYSTEM),l=a?c.find((function(t){return t.checked})):null;r("UPDATE_ORDER",b({},i,{deliveryMethods:s,paymentMethods:c,groupStore:o||[],deliveryId:a?a.id:null,paymentId:l?l.id:null,productList:w(e.GRID.ROWS),total:I(e.TOTAL),props:e.ORDER_PROP.properties.map((function(t){return{id:parseInt(t.ID,10),code:t.CODE}}))}))}}))},sendRequest:function(t,e){var r=t.getters,n=e.data,o=e.order;return v.d(E.ajaxUrl,b({order:r.getAllFormData(o.id),storeId:o.storeId,via_ajax:"Y",SITE_ID:E.siteID,signedParamsString:E.signedParamsString,sessid:_.a.sessid(),action:"refreshOrderAjax"},n))},sendAllRequest:function(t,e){var r=t.state,n=t.dispatch,o=e.data,i=e.order,s=i?[i]:r.orderList;return Promise.all(s.map((function(t){return n("sendRequest",{data:o,order:t}).then((function(e){return b({},e,{oldOrderData:t})}))})))},refreshOrderAjax:(l=u()(s.a.mark((function t(e){var r,n,o,i=arguments;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.commit,n=e.dispatch,o=i.length>1&&void 0!==i[1]?i[1]:null,r("SET_CHECKOUT_STATUS","loading"),t.prev=3,t.t0=n,t.next=7,n("sendAllRequest",{data:{action:"refreshOrderAjax"},order:o});case 7:return t.t1=t.sent,t.next=10,(0,t.t0)("refreshOrder",t.t1);case 10:t.next=15;break;case 12:t.prev=12,t.t2=t.catch(3),m.a.$notify.error("При обновлении заказа что-то пошло не так. Попробуйте обновить страницу.");case 15:r("SET_CHECKOUT_STATUS",null);case 16:case"end":return t.stop()}}),t,null,[[3,12]])}))),function(t){return l.apply(this,arguments)}),enterCoupon:(a=u()(s.a.mark((function t(e,r){var n,o,i,a,c;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.commit,o=e.dispatch,n("SET_CHECKOUT_STATUS","loading"),t.next=4,o("sendAllRequest",{data:{action:"enterCoupon",coupon:r}});case 4:if(i=t.sent,n("SET_CHECKOUT_STATUS",null),a=i[0].order){t.next=10;break}throw m.a.$notify("error",{title:"Промокод не найден",text:"Возможно, он работает только в стационарных магазинах"}),new Error("Промокод не найден");case 10:if(o("refreshOrder",i),"APPLIED"===(c=a.COUPON_LIST[a.COUPON_LIST.length-1]).JS_STATUS){t.next=15;break}throw m.a.$notify("error",{title:"Промокод не применён",text:c.STATUS_TEXT}),new Error("Промокод не применён");case 15:return t.abrupt("return",c);case 16:case"end":return t.stop()}}),t)}))),function(t,e){return a.apply(this,arguments)}),clearCheckout:function(t){var e=t.state,r=t.commit,n=t.dispatch,i=o()(e.orderList);r("SET_ORDER_LIST",[]),n("cart/clearCart",null,{root:!0}).catch((function(){return r("SET_ORDER_LIST",i)}))}},p()(r,"SET_PROPERTY_GROUPS",(function(t,e){(0,t.commit)("SET_PROPERTY_GROUPS",function(t){return Object.values(t).sort((function(t,e){return parseInt(t.SORT,10)-parseInt(e.SORT,10)})).map((function(t){return{id:parseInt(t.ID,10),name:t.NAME,personTypeId:parseInt(t.PERSON_TYPE_ID,10)}}))}(e))})),p()(r,"SET_PROPERTY_LIST",(function(t,e){var r=t.state,n=t.commit;(function(t){return(Array.isArray(t)?t:Object.values(t)).sort((function(t,e){return parseInt(t.SORT,10)-parseInt(e.SORT,10)})).map((function(t){var e={id:parseInt(t.ID,10),isDynamic:!0,title:t.NAME||"",description:t.DESCRIPTION||"",code:t.CODE,value:t.VALUE[0],personTypeId:parseInt(t.PERSON_TYPE_ID,10),propsGroupId:parseInt(t.PROPS_GROUP_ID,10),required:"Y"===t.REQUIRED,name:"ORDER_PROP_".concat(t.ID),isUserProps:"Y"===t.USER_PROPS,isLocation:"Y"===t.IS_LOCATION,type:"",inputmode:"",autocomplete:"",error:"",relationDelivery:[]};switch(t.RELATION&&(e.relationDelivery=t.RELATION.filter((function(t){return"D"===t.ENTITY_TYPE})).map((function(t){return parseInt(t.ENTITY_ID,10)}))),t.TYPE){case"STRING":e.type="text";break;case"DATE":e.type="date";break;case"NUMBER":e.type="number";break;case"LOCATION":e.type="location";break;default:e.type="text"}var r=t.CODE;switch("Y"===t.IS_EMAIL&&(r="EMAIL"),"Y"===t.IS_PHONE&&(r="PHONE"),"Y"===t.IS_ZIP&&(r="INDEX"),"Y"===t.IS_ADDRESS&&(r="ADDRESS"),r){case"FIO":e.autocomplete="name";break;case"EMAIL":e.type="email",e.autocomplete="email",e.inputmode="email";break;case"PHONE":e.type="tel",e.autocomplete="tel",e.inputmode="tel";break;case"INDEX":e.autocomplete="shipping postal-code",e.inputmode="numeric";break;case"ADDRESS":e.autocomplete="shipping street-address";break;case"STREET":e.autocomplete="shipping address-line1";break;case"HOUSE":e.autocomplete="";break;case"CITY":e.autocomplete="shipping address-level2";break;case"FLAT":e.autocomplete="shipping address-line2"}return e}))})(e).forEach((function(t){r.propertyList.find((function(e){return e.code===t.code}))||(n("ADD_PROPERTY",t),n("UPDATE_PROP_BY_CODE",{code:t.code,message:t.value}))}))})),p()(r,k,(function(t,e){var r=t.commit,n=t.dispatch,o=e.id,i=e.order;r(k,{id:o,order:i}),n("refreshOrderAjax",i)})),p()(r,g,(function(t,e){var r=t.commit,n=t.dispatch,o=e.id,i=e.order;r(g,{id:o,order:i}),n("refreshOrderAjax",i)})),p()(r,C,(function(t,e){var r=t.commit,n=e.storeId,o=e.order;r(C,{storeId:n,order:o})})),p()(r,O,(function(t,e){(0,t.commit)(O,e)})),p()(r,"SET_ERRORS",(function(t,e){var r=t.commit;return console.log(e),r("SET_ERRORS",e),e.PROPERTY&&e.PROPERTY.length?(r("SET_CURRENT_STEP","form"),void _.a.scrollTo(document.getElementById("order-props"))):e.DELIVERY&&e.DELIVERY.length?(r("SET_CURRENT_STEP","shipping-and-payment"),void _.a.scrollTo(document.getElementById("order-delivery"))):void(e.PAY_SYSTEM&&e.PAY_SYSTEM.length&&(r("SET_CURRENT_STEP","shipping-and-payment"),_.a.scrollTo(document.getElementById("order-delivery"))))})),p()(r,"checkout",(i=u()(s.a.mark((function e(r){var n,o,i,a,c,l,d;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.commit,o=r.dispatch,i=r.getters,a=r.rootState,c=r.rootGetters,n("SET_CHECKOUT_STATUS","loading"),_.a.log("Checkout","Отправка заказов"),l=[],e.next=6,Promise.all(i.orderList.map(function(){var t=u()(s.a.mark((function t(e){var r,n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=b({},i.getAllFormData(e.id),{storeId:e.storeId}),n=new FormData,Object.keys(r).forEach((function(t){n.append(t,r[t])})),_.a.log("Checkout","Отправка заказа для склада ".concat(e.storeId)),t.abrupt("return",h.a.post("/checkout/",n).then((function(t){return _.a.log("Checkout","Ответ по заказу со склада ".concat(e.storeId," получен")),t.data})).then((function(t){return t.order&&(t.order.ERROR&&o("SET_ERRORS",t.order.ERROR),t.order.REDIRECT_URL&&(t.order.ID?l.push(t.order.ID):o(O,e))),t})).catch((function(t){m.a.$notify.error("При оформление заказа что-то пошло не так. Мы уже ищем причину. Пока попробуйте обновить страницу."),console.log(t)})));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 6:if(d=e.sent,n("SET_CHECKOUT_STATUS",null),_.a.log("Checkout","Разбор ответов"),console.log(d),0!==l.length){e.next=12;break}return e.abrupt("return");case 12:p={event:"purchase",ecommerce:{purchase:{actionField:{id:l.join(","),revenue:i.orderList.reduce((function(t,e){return t+e.total.ORDER_TOTAL_PRICE}),0),shipping:i.orderList.reduce((function(t,e){return t+e.total.DELIVERY_PRICE}),0)},products:i.orderList.flatMap((function(t){return t.productList.map((function(e){return{id:e.productId,name:e.name,price:e.price,variant:"",dimension3:a.storeRemoteId===t.storeId?"Основной склад":c.getStoreById(t.storeId).name,quantity:e.quantity}}))}))}}},console.log("Google Tag Manager:",p),t.dataLayer?t.dataLayer.push(p):console.error("Google Tag Manager:","Not found"),d.length!==l.length&&alert("Некоторые отправления не были оформлены. Вернитесь в корзину, чтобы повторить"),document.location.href="/checkout/final/?ORDER_ID=".concat(l.join(","));case 15:case"end":return e.stop()}var p}),e)}))),function(t){return i.apply(this,arguments)})),r);return{namespaced:!0,state:{checkoutStatus:null,buyerStore:null,personTypeId:null,locationName:"",isKnownCity:!1,knownCityName:[],errors:{PROPERTY:[],PAY_SYSTEM:[],DELIVERY:[],AUTH:[]},orderList:[],propertyGroups:[],propertyList:[],props:{DESCRIPTION:"",sdekPickup:""}},getters:f,actions:y,mutations:(n={SET_PARAM:function(t,e){t.locationName=e.LOCKED_LOCATION_NAME||"",t.isKnownCity="Y"===e.KNOWN_CITY,t.knownCityName=e.KNOWN_CITY_NAME_DECLENSION||[],t.buyerStore=parseInt(e.BUYER_STORE,10),t.personTypeId=Object.values(e.PERSON_TYPE).find((function(t){return"Y"===t.CHECKED})).ID},SET_CHECKOUT_STATUS:function(t,e){t.checkoutStatus=e},SET_ERRORS:function(t,e){t.errors=b({},t.errors,{},e)},SET_ORDER_LIST:function(t,e){t.orderList=e},UPDATE_ORDER:function(t,e){t.orderList=t.orderList.map((function(t){return t.id!==e.id?t:b({},t,{},e)}))}},p()(n,O,(function(t,e){t.orderList=t.orderList.filter((function(t){return t.id!==e.id}))})),p()(n,C,(function(t,e){var r=e.storeId,n=e.order;t.orderList.find((function(t){return t.id===n.id})).storeId=r})),p()(n,g,(function(t,e){var r=e.id,n=e.order;t.orderList.find((function(t){return t.id===n.id})).deliveryId=r})),p()(n,k,(function(t,e){var r=e.id,n=e.order;t.orderList.find((function(t){return t.id===n.id})).paymentId=r})),p()(n,"SET_PROPERTY_GROUPS",(function(t,e){t.propertyGroups=e})),p()(n,"ADD_PROPERTY",(function(t,e){t.propertyList.push(e)})),p()(n,"UPDATE_PROP_BY_CODE",(function(t,e){var r=e.code,n=e.message;m.a.set(t.props,r,n)})),n)}}}).call(this,r(16))},46:function(t,e,r){t.exports=r(267)},48:function(t,e,r){"use strict";r(4);var n=r(33),o=r(50),i={name:"ShopListMap",components:{yandexMap:n.a,ymapMarker:n.b},model:{prop:"currentStoreId",event:"change"},props:{currentStoreId:{type:Number,requared:!1}},data:function(){return{coords:[55.74954,37.621587],zoom:17,options:{avoidFractionalZoom:!1}}},watch:{currentStoreId:function(t,e){console.log("сменилось c",e," на ",t),this.objectManager&&(t?this.openBalloon(t):this.objectManager.objects.balloon.close())}},methods:{mapInit:function(t){var e=this;console.log("init"),this.map=t,this.map.margin.setDefaultMargin(200),this.objectManager=o.a.createObjectManager(ymaps),this.objectManager.add({type:"FeatureCollection",features:this.$store.state.storeList.map((function(t){return{type:"Feature",id:t.id,geometry:{type:"Point",coordinates:t.coords},properties:{address:t.name,tel:t.phone[0],link:"Схема проезда",cityId:t.cityId}}}))}),this.objectManager.objects.options.set("openBalloonOnClick",!1),this.objectManager.objects.events.add("click",(function(t){e.objectManager.objects.balloon.isOpen(t.get("objectId"))?e.$emit("change",null):e.$emit("change",t.get("objectId"))})),this.map.geoObjects.add(this.objectManager);var r=this.map.container.getSize();if(0!==r[0]&&0!==r[1]){if(this.currentStoreId)return console.log("setCenter",this.currentStoreId),void this.openBalloon(this.currentStoreId);console.log("setBounds");var n=this.$store.state.storeList.filter((function(t){return t.cityId===e.$store.state.cityId})).map((function(t){return t.coords}));n.length?this.map.setBounds(ymaps.util.pixelBounds.fromPoints(n),{checkZoomRange:!0,preciseZoom:!0,useMapMargin:!0}):this.map.setBounds(this.map.geoObjects.getBounds(),{checkZoomRange:!0,preciseZoom:!0,useMapMargin:!0})}},openBalloon:function(t){var e=this;this.objectManager.objects.balloon.open(t).then((function(){var r=e.objectManager.objects.getById(t);console.log("Открываем балун"),e.map.setCenter(r.geometry.coordinates,16,{duration:1e3,timingFunction:"ease-in-out",useMapMargin:!0,checkZoomRange:!0})}))}},beforeDestroy:function(){this.objectManager.objects.balloon.close()}},s=r(1),a=Object(s.a)(i,(function(){var t=this.$createElement;return(this._self._c||t)("yandex-map",{attrs:{coords:this.coords,zoom:this.zoom,options:this.options,controls:[],debug:!0},on:{"map-was-initialized":this.mapInit}})}),[],!1,null,"217bb49e",null);e.a=a.exports},54:function(t,e,r){"use strict";r.d(e,"a",(function(){return d}));var n=r(7),o=r.n(n),i=r(8),s=r.n(i),a=r(2),c=r.n(a),l=r(5),u=r(3),d=function(){function t(e){var r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;o()(this,t),c()(this,"onClick",(function(t){t.preventDefault(),r.data.isFavorite?r.removeFromFavorites():r.addToFavorites()})),this.data=e,this.el=n,this.favoriteButtonEl=null,this.removable=!1,this.init()}return s()(t,[{key:"init",value:function(){this.el?(this.favoriteButtonEl=this.el.querySelector(".product-control__favorites"),"product.favorites.remove"===this.favoriteButtonEl.getAttribute("data-toggle")&&(this.removable=!0)):this.initDOM(),this.favoriteButtonEl.addEventListener("click",this.onClick),this.el.ProductCard=this}},{key:"getDeliveryLabelHTML",value:function(){if(!u.a.state.isLocaleStore)return"";var e=u.a.getters.currentCity;return!e||e.isFake?"":this.data.isAvailable?this.data.isDeliveryOneDay?'<div class="product-card__badge product-card__badge_local">'.concat(t.badgeTextLocal(),"</div>"):'<div class="product-card__badge product-card__badge_central">'.concat(t.badgeTextCentral(),"</div>"):""}},{key:"initDOM",value:function(){this.el=document.createElement("div"),this.el.classList.add("product-card"),this.el.setAttribute("data-product-id",this.data.id);var e=document.createElement("div");e.classList.add("product-card__wrapper"),e.innerHTML='\n      <div class="product-card__img">\n        <img src="'.concat(this.data.img,'" srcset="').concat(this.data.img2x,' 2x" alt="').concat(this.data.name,'">\n      </div>\n      <div class="product-card__body">\n        ').concat(this.getDeliveryLabelHTML(),'\n        <a class="product-card__title stretched-link" href="').concat(this.data.url,'" title="Перейти в карточку товара">').concat(this.data.name,'</a>\n        <div class="product-card__description">').concat(this.data.section,'</div>\n      </div>\n      <div class="product-card__footer">\n        <div class="product-card__price">\n          <span class="small">').concat(this.data.pack_count?"от":"",'</span>\n          <span class="price">').concat(this.data.price,'</span>\n          <span class="currency">₽</span>\n        </div>\n        <div class="product-card__sale">').concat(this.data.price_benefit?"Экономия до ".concat(this.data.price_benefit," ₽"):"",'</div>\n        <div class="product-card__row">\n          <div class="product-card__reviews">\n            ').concat(t.getRatingEl(this.data.rating),'\n            <span style="').concat(0===this.data.review?"display: none":"",'">\n              ').concat(this.data.review," ").concat(l.a.declOfNum(this.data.review,["отзыв","отзыва","отзывов"]),'\n            </span>\n          </div>                \n          <div class="product-card__stock">\n            <div class="').concat(this.data.isAvailable?"green":"red",'">\n              ').concat(this.data.isAvailable?"В наличии":"Нет в наличии",'\n            </div>\n            <div style="').concat(0===this.data.pack_count?"display: none":"",'">\n              ').concat(this.data.pack_count," ").concat(l.a.declOfNum(this.data.pack_count,["фасовка","фасовки","фасовок"]),"\n            </div>\n          </div>\n        </div>\n      </div>");var r=document.createElement("div");r.classList.add("product-stickers"),this.data.isRecommend&&(r.innerHTML+='<div class="product-stickers__item product-stickers__item_yellow">Рекомендуем</div>'),this.data.isNew&&(r.innerHTML+='<div class="product-stickers__item product-stickers__item_green">Новинка</div>'),this.data.isHit&&(r.innerHTML+='<div class="product-stickers__item product-stickers__item_red">Хит!</div>');var n=document.createElement("div");n.classList.add("product-control"),this.favoriteButtonEl=document.createElement("button"),this.favoriteButtonEl.type="button",this.favoriteButtonEl.classList.add("product-control__favorites"),this.data.isFavorite&&this.favoriteButtonEl.classList.add("active"),this.favoriteButtonEl.innerHTML='<svg viewBox="0 0 31 27" width="100%" height="100%"><path d="M14.107 3.817l1.106 1.182 1.094-1.193C17.63 2.364 19.555 1.5 21.667 1.5c3.997 0 7.26 3.259 7.267 7.27a7.216 7.216 0 0 1-2.136 5.152l-.002.002-11.62 11.546L3.638 13.924h0l-.004-.004A7.187 7.187 0 0 1 1.5 8.778c0-4.036 3.28-7.274 7.27-7.274a7.31 7.31 0 0 1 5.337 2.313zm1.121 21.706h0s0 0 0 0z" fill="currentColor" stroke="currentColor" stroke-width="3"></path></svg>',n.appendChild(this.favoriteButtonEl),this.el.appendChild(e),this.el.appendChild(r),this.el.appendChild(n)}},{key:"addToFavorites",value:function(){var t=this;this.favoriteButtonEl.classList.add("active"),u.a.dispatch("addToFavorites",this.data.id).then((function(){t.data.isFavorite=!0})).catch((function(){t.favoriteButtonEl.classList.remove("active")}))}},{key:"removeFromFavorites",value:function(){var t=this;this.favoriteButtonEl.classList.remove("active"),this.removable&&(this.el.style.display="none"),u.a.dispatch("removeFromFavorites",this.data.id).then((function(){t.data.isFavorite=!1,t.removable&&t.el.parentNode.removeChild(t.el)})).catch((function(){t.favoriteButtonEl.classList.add("active"),t.el.style.display=""}))}},{key:"getElement",value:function(){return this.el}},{key:"unMount",value:function(){this.favoriteButtonEl.removeEventListener("click",this.onClick),this.el.ProductCard=null}}],[{key:"getRatingEl",value:function(t){if(t<3)return"";var e=Math.round(t),r='<span class="product-card__rating">';return[0,1,2,3,4].forEach((function(t){r+='<i class="i i-star'.concat(t<e?" red":"",'"></i>')})),r+="</span>"}},{key:"initHtmlApi",value:function(){this.initDOMLoadedElements=this.initDOMLoadedElements.bind(this),"undefined"!=typeof MutationObserver&&(this.globalObserver=new MutationObserver((function(e){e.forEach((function(e){Array.prototype.forEach.call(e.addedNodes,(function(e){1===e.nodeType&&(e.classList.contains("product-card")&&e.hasAttribute("data-product-id")?!e.ProductCard&&new t(t.getElOptions(e),e):Array.prototype.forEach.call(e.querySelectorAll(".product-card[data-product-id]"),(function(e){!e.ProductCard&&new t(t.getElOptions(e),e)})))})),Array.prototype.forEach.call(e.removedNodes,(function(t){1===t.nodeType&&(t.classList.contains("product-card")&&t.hasAttribute("data-product-id")?t.ProductCard&&t.ProductCard.unMount():Array.prototype.forEach.call(t.querySelectorAll(".product-card[data-product-id]"),(function(t){t.ProductCard&&t.ProductCard.unMount()})))}))}))})),this.globalObserver.observe(document,{childList:!0,subtree:!0})),"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?window.setTimeout(this.initDOMLoadedElements):(document.addEventListener("DOMContentLoaded",this.initDOMLoadedElements),window.addEventListener("load",this.initDOMLoadedElements))}},{key:"initDOMLoadedElements",value:function(){document.removeEventListener("DOMContentLoaded",this.initDOMLoadedElements),window.removeEventListener("load",this.initDOMLoadedElements),Array.prototype.forEach.call(document.querySelectorAll(".product-card[data-product-id]"),(function(e){e.ProductCard||new t(t.getElOptions(e),e)}))}},{key:"getElOptions",value:function(t){var e=parseInt(t.getAttribute("data-product-id"),10);return{id:e,isFavorite:-1!==u.a.state.favorites.indexOf(e)}}},{key:"badgeTextCentral",value:function(){var t="от 1",e="дня",r=u.a.getters.currentCity;return r&&r.deliveryCountDays&&r.deliveryCountDays.length>1&&(t="".concat(r.deliveryCountDays[0],"-").concat(r.deliveryCountDays[1]),e=l.a.declOfNum(r.deliveryCountDays[1],["дня","дней","дней"])),"Со склада в СПБ, ".concat(t," ").concat(e)}},{key:"badgeTextLocal",value:function(){return"Магазин рядом, 1 день"}}]),t}();d.initHtmlApi()},64:function(t,e,r){"use strict";var n={name:"AppModalMap",components:{ShopListMap:r(48).a},props:{storeId:{type:Number,default:null}},data:function(){return{currentStoreId:this.storeId}},computed:{activeStore:function(){return this.$store.getters.getStoreById(this.currentStoreId)}},methods:{setPoint:function(t){console.log("setPoint",t),this.currentStoreId=t}}},o=r(1),i=Object(o.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"m-store-on-map"},[t._m(0),t._v(" "),r("div",{staticClass:"m-store-on-map__mask"},[r("ShopListMap",{staticClass:"m-store-on-map__map",model:{value:t.currentStoreId,callback:function(e){t.currentStoreId=e},expression:"currentStoreId"}})],1),t._v(" "),r("div",{staticClass:"m-store-on-map__footer"},[t.activeStore?r("div",{staticClass:"m-store-on-map__way row"},[t.activeStore.wayOnAuto?r("div",{staticClass:"col-xl-6"},[r("div",[t._v("Добраться на машине:")]),t._v(" "),r("p",{staticClass:"gray",domProps:{innerHTML:t._s(t.activeStore.wayOnAuto)}})]):t._e(),t._v(" "),t.activeStore.wayOnFoot?r("div",{staticClass:"col-xl-6"},[r("div",[t._v("Добраться пешком:")]),t._v(" "),r("p",{staticClass:"gray",domProps:{innerHTML:t._s(t.activeStore.wayOnFoot)}})]):t._e()]):t._e()])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"m-store-on-map__header"},[e("div",{staticClass:"m-store-on-map__title"},[this._v("Магазины на карте")])])}],!1,null,"3286d2de",null);e.a=i.exports},65:function(t,e,r){"use strict";var n=r(2),o=r.n(n),i=r(21),s=r.n(i),a=r(27),c=r.n(a),l=r(4),u=r(18),d=r(5),p=r(38),f=r(90);function h(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}var m={name:"CheckoutLocationSearch",props:{disabled:{type:Boolean,default:!1}},components:{CheckoutLocationLocked:f.a},data:function(){return{value:"",isActive:!1,selectedIndex:null,status:null,error:null,searchedItems:[]}},created:function(){var t=this;if(this.debouncedGetLocation=c()(this.getLocation,300),this.isKnownCity)if(this.$store.state.checkout.props[this.locationProperty.code]){var e={select:{1:"CODE",2:"TYPE_ID",VALUE:"ID",DISPLAY:"NAME.NAME"},additionals:{1:"PATH"},filter:{"=CODE":this.$store.state.checkout.props[this.locationProperty.code],"=NAME.LANGUAGE_ID":"ru","=SITE_ID":p.f.siteID},version:2,PAGE_SIZE:10,PAGE:0};this.status="loading",Object(u.h)(e).then((function(e){var r=e.data,n=void 0===r?{ITEMS:[]}:r;t.searchedItems=n.ITEMS.map((function(t){return{code:t.CODE,name:t.DISPLAY,path:t.PATH.map((function(t){return n.ETC.PATH_ITEMS[t].DISPLAY}))}})),t.searchedItems.length&&(t.selectedIndex=0,t.value=[t.searchedItems[0].name].concat(s()(t.searchedItems[0].path)).join(", "),t.locationProperty.error=null)})).catch((function(e){t.value=t.knownCityName[0]})).finally((function(){t.status=null}))}else this.value=this.knownCityName[0]},computed:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?h(Object(r),!0).forEach((function(e){o()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},Object(l.d)("checkout",{isKnownCity:"isKnownCity",knownCityName:"knownCityName",propertyList:"propertyList"}),{locationProperty:function(){return this.propertyList.find((function(t){return"location"===t.type}))}}),methods:{chooseCity:function(t){console.log("chooseCity",t),this.isActive=!1,t?(this.value=[t.name].concat(s()(t.path)).join(", "),this.$store.commit("checkout/UPDATE_PROP_BY_CODE",{code:this.locationProperty.code,message:t.code}),this.locationProperty.error=null):this.$store.commit("checkout/UPDATE_PROP_BY_CODE",{code:this.locationProperty.code,message:null}),this.$store.dispatch("checkout/refreshOrderAjax")},getHTML:function(t){return d.a.wrapSubstring([t.name].concat(s()(t.path)).join(", "),this.value)},getLocation:function(){var t=this;if(!(this.value.length<2)){this.selectedIndex=0,this.$refs.dropdownMenu.scrollTop=0,this.status="loading";var e={select:{1:"CODE",2:"TYPE_ID",VALUE:"ID",DISPLAY:"NAME.NAME"},additionals:{1:"PATH"},filter:{"=PHRASE":this.value,"=NAME.LANGUAGE_ID":"ru","=SITE_ID":p.f.siteID},version:2,PAGE_SIZE:25,PAGE:0};Object(u.h)(e).then((function(e){var r=e.data,n=void 0===r?{ITEMS:[]}:r;t.searchedItems=n.ITEMS.map((function(t){return{code:t.CODE,name:t.DISPLAY,path:t.PATH.map((function(t){return n.ETC.PATH_ITEMS[t].DISPLAY}))}}))})).catch((function(e){t.error=e.response.errors[0]})).finally((function(){t.status=null}))}},keyboardNav:function(t){switch(t.keyCode){case 13:t.preventDefault(),this.onEnter();break;case 38:t.preventDefault(),this.onKeyArrowUp();break;case 40:t.preventDefault(),this.onKeyArrowDown()}},onKeyArrowDown:function(){this.isActive=!0,null===this.selectedIndex?this.selectedIndex=0:this.selectedIndex=Math.min(this.searchedItems.length-1,this.selectedIndex+1);var t=this.$refs.dropdownMenu.children[this.selectedIndex];t.offsetTop+t.clientHeight>this.$refs.dropdownMenu.scrollTop+this.$refs.dropdownMenu.clientHeight&&(this.$refs.dropdownMenu.scrollTop=t.offsetTop-this.$refs.dropdownMenu.clientHeight+t.clientHeight)},onKeyArrowUp:function(){this.isActive=!0,null===this.selectedIndex?this.selectedIndex=this.searchedItems.length-1:this.selectedIndex=Math.max(0,this.selectedIndex-1);var t=this.$refs.dropdownMenu.children[this.selectedIndex];t.offsetTop<this.$refs.dropdownMenu.scrollTop&&(this.$refs.dropdownMenu.scrollTop=t.offsetTop)},validate:function(){this.locationProperty.required&&null===this.$store.state.checkout.props[this.locationProperty.code]&&(this.locationProperty.error="Выберите город из списка")},onInput:function(t){this.isActive=!0,this.value=t.target.value,this.$store.commit("checkout/UPDATE_PROP_BY_CODE",{code:this.locationProperty.code,message:null}),""!==this.value&&(this.status="loading",this.debouncedGetLocation())},onEnter:function(){this.isActive=!1,null!==this.selectedIndex&&this.chooseCity(this.searchedItems[this.selectedIndex]),this.validate()},activate:function(t){console.log(t),this.isActive||(this.isActive=!0)},deactivate:function(t){console.log(t),this.isActive&&(this.isActive=!1,this.validate())}}},v=r(1),_=Object(v.a)(m,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.deactivate,expression:"deactivate"}],staticClass:"checkout-location-search",attrs:{tabindex:"-1"},on:{keydown:t.keyboardNav}},[r("div",{staticClass:"checkout-location-search__field"},[t.disabled?r("CheckoutLocationLocked",{attrs:{value:t.value}}):r("label",{staticClass:"input-field input-field_primary",class:{"input-field_invalid":t.locationProperty.error}},[r("span",{staticClass:"input-field__label",class:{"input-field__label_active":""!==t.value}},[t._v(t._s(t.locationProperty.title+(t.locationProperty.required?"*":"")))]),t._v(" "),r("input",{staticClass:"input-field__input",attrs:{spellcheck:"false",tabindex:"0"},domProps:{value:t.value},on:{input:t.onInput,focus:t.activate,blur:t.deactivate,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.deactivate(e)}}}),t._v(" "),r("transition",{attrs:{name:"fade-left"}},[!t.isActive&&t.locationProperty.error?r("div",{staticClass:"input-field__alert"},[t._v(t._s(t.locationProperty.error))]):t._e()])],1)],1),t._v(" "),r("ul",{ref:"dropdownMenu",staticClass:"checkout-location-search__list dropdown-menu",class:{show:t.isActive},attrs:{role:"listbox"}},[t.value.length<2?r("li",{staticClass:"checkout-location-search__message"},[t._v("Начните вводить название...")]):"loading"===t.status?r("li",{staticClass:"checkout-location-search__message"},[r("div",{staticClass:"spinner-border",attrs:{role:"status"}})]):t.error?r("li",{staticClass:"checkout-location-search__message"},[t._v(t._s(t.error))]):0===t.searchedItems.length?r("li",{staticClass:"checkout-location-search__message"},[t._v("Не найдено")]):t._l(t.searchedItems,(function(e,n){return r("li",{staticClass:"checkout-location-search__item",class:{active:t.selectedIndex===n},attrs:{role:"option",tabindex:"-1"},domProps:{innerHTML:t._s(t.getHTML(e))},on:{mouseover:function(e){t.selectedIndex=n},mousedown:function(r){return r.preventDefault(),r.stopPropagation(),t.chooseCity(e)}}})}))],2)])}),[],!1,null,"182926e3",null);e.a=_.exports},66:function(t,e){function r(t,e,r,n,o,i,s){try{var a=t[i](s),c=a.value}catch(t){return void r(t)}a.done?e(c):Promise.resolve(c).then(n,o)}t.exports=function(t){return function(){var e=this,n=arguments;return new Promise((function(o,i){var s=t.apply(e,n);function a(t){r(s,o,i,a,c,"next",t)}function c(t){r(s,o,i,a,c,"throw",t)}a(void 0)}))}}},72:function(t,e,r){"use strict";var n=r(7),o=r.n(n),i=r(8),s=r.n(i),a=r(2),c=r.n(a),l=function(){function t(e){var r=this;o()(this,t),c()(this,"calculate",(function(){var t=r.textarea.scrollHeight;""===r.textarea.value?r.textarea.style.height="":r.textarea.style.height="".concat(t+r.border,"px")})),"TEXTAREA"===e.tagName&&(this.textarea=e,this.border=this.textarea.offsetHeight-this.textarea.clientHeight,this.textarea.style.resize="none",this.textarea.style.overflow="hidden",this.textarea.addEventListener("keydown",this.calculate),this.textarea.addEventListener("keyup",this.calculate))}return s()(t,null,[{key:"init",value:function(e){[].forEach.call(e,(function(e){new t(e)}))}}]),t}();e.a=l},84:function(t,e,r){"use strict";(function(t){var n=r(20);e.a={name:"CheckoutLocationLocked",props:{value:{type:String,required:!0}},methods:{editCity:function(){n.b.scrollTo(document.querySelector(".h-navbar-collapse")),t(".change-city-collapse").collapse("show")}}}}).call(this,r(14))},85:function(t,e,r){"use strict";(function(t){var n=r(2),o=r.n(n),i=r(4),s=r(65),a=r(5);function c(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}e.a={name:"CheckoutAddress",components:{CheckoutLocationSearch:s.a},props:{category:{type:String,default:""}},computed:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?c(Object(r),!0).forEach((function(e){o()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},Object(i.d)({isLocaleStore:function(t){return t.isLocaleStore},locationName:function(t){return t.checkout.locationName},props:function(t){return t.checkout.props}})),methods:{editCity:function(){a.a.scrollTo(document.querySelector(".h-navbar-collapse")),t(".change-city-collapse").collapse("show")}}}}).call(this,r(14))},86:function(t,e,r){"use strict";(function(t){var n=r(33);e.a={name:"SdekModal",components:{yandexMap:n.a,ymapMarker:n.b},props:{cityPointList:{type:Object,required:!0}},data:function(){return{coords:[55.74954,37.621587],activePoint:"",currentTab:"list",breakpoint:this.getBreakpoint()}},computed:{currentCity:function(){return window.IPOLSDEK_pvz.city}},methods:{getBreakpoint:function(){return document.documentElement.clientWidth<768?"xs":document.documentElement.clientWidth<1240?"md":"xl"},onClick:function(e){var r=this.$refs.pickupList.querySelector('[data-name="'.concat(e,'"]'));[].forEach.call(this.$refs.pickupList.children,(function(t){t.classList.remove("active")})),r.classList.add("active"),r.offsetTop<this.$refs.pickupList.scrollTop?t(this.$refs.pickupList).animate({scrollTop:r.offsetTop-50},1e3):r.offsetTop+r.clientHeight>this.$refs.pickupList.scrollTop+this.$refs.pickupList.clientHeight&&t(this.$refs.pickupList).animate({scrollTop:r.offsetTop-this.$refs.pickupList.clientHeight+r.clientHeight+50},1e3)},setPoint:function(t){this.$emit("modal:close",t)},onEnter:function(t){this.activePoint=t},onLeave:function(t){},mapInit:function(t){var e=this.$refs.pickupList.getBoundingClientRect().width;t.margin.setDefaultMargin([0,50,0,e]),t.setBounds(t.geoObjects.getBounds(),{checkZoomRange:!0,preciseZoom:!0,useMapMargin:!0})}}}}).call(this,r(14))},90:function(t,e,r){"use strict";var n=r(84).a,o=r(1),i=Object(o.a)(n,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"checkout-location"},[e("div",{staticClass:"checkout-location__name"},[this._v("\n    "+this._s(this.value)+"\n  ")]),this._v(" "),e("button",{staticClass:"checkout-location__button",attrs:{type:"button"},on:{click:this.editCity}},[this._v("\n    Изменить\n  ")])])}),[],!1,null,null,null);e.a=i.exports}},[[266,1,0]]]);