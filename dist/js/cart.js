(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{177:function(t,e,r){"use strict";r.r(e),function(t){r(13),r(15);var e=r(4),n=r(99),i=r(2),s=r(30);$(function(){i.a.registerModule("checkout",s.c),i.a.dispatch("checkout/initSoa",t.soaData),new e.a({store:i.a,render:function(t){return t(n.a)}}).$mount("#vueTest"),$('[data-cart="promocode"]').on("click",function(t){t.preventDefault();var e=t.currentTarget,r=e.innerHTML;e.classList.contains("btn-gray-2")&&(e.innerHTML='<div class="spinner-border spinner-border-sm" role="status"></div>',setTimeout(function(){Math.round(Math.random())?(e.classList.remove("btn-gray-2"),e.classList.add("btn-green"),e.innerHTML='<i class="icon icon-check"></i>'):(e.classList.remove("btn-gray-2"),e.classList.add("btn-red"),e.innerHTML="Неудачно",setTimeout(function(){e.classList.remove("btn-red"),e.classList.add("btn-gray-2"),e.innerHTML=r},1e3))},1e3))}),$('[data-cart="remove-product"]').on("click",function(t){t.preventDefault();var e=$(t.currentTarget).parents(".order-product");e.siblings(".order-product").length>0?e.slideUp(300,function(){e.remove()}):e.parents(".order-item").slideUp(300,function(){e.parents(".order-item").remove()})}),$('[data-cart="remove-shiping"]').on("click",function(t){t.preventDefault();var e=$(t.currentTarget).parents(".order-shiping");e.slideUp(500,function(){e.remove()})})})}.call(this,r(5))},30:function(t,e,r){"use strict";(function(t){r.d(e,"b",function(){return u}),r.d(e,"a",function(){return _});var n,i,s=r(10),o=r(7),a=r.n(o),c=r(12);function l(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var u="SET_SELECTED_SHIPPING_METHOD_ID",_="SET_PAYMENT_SHIPPING_METHOD_ID",d={getCurrentStep:function(t){return t.steps.find(function(e){return e.key===t.currentStepName})},nextStepButton:function(t){if(document.documentElement.clientWidth<1240){var e=t.steps.find(function(e){return e.key===t.currentStepName});return{key:e.next,text:e.nextButtonText}}return{key:"final",text:"Оформить заказ"}},visibleShippingMethods:function(t){if(t.result.LOCAL_STORE){var e=null,r=null;return t.delivery.forEach(function(t){"C"===t.type&&(e=t),"P"===t.type&&(r=t)}),[r,e].filter(function(t){return t})}return t.delivery.filter(function(t){return!t.errors})},getAllFormData:function(e){var r={DELIVERY_ID:e.selectedShippingMethodId,PAY_SYSTEM_ID:e.selectedPaymentMethodId,BUYER_STORE:e.result.BUYER_STORE,PERSON_TYPE:e.personType,action:"saveOrderAjax",location_type:"code",sessid:t.BX&&t.BX.bitrix_sessid?t.BX.bitrix_sessid():""};return e.propertyList.forEach(function(t){r[t.fieldName]=t.value}),r}},p=(l(n={initSoa:function(t,e){var r=t.commit,n=t.dispatch;r("SET_SOA",e),n("REFRESH_ORDER",e.result)}},"SET_SHIPPING_METHODS",function(t,e){var r=t.commit;t.getters;r("SET_SHIPPING_METHODS",Object.values(e).sort(function(t,e){var r=parseInt(t.SORT,10)-parseInt(e.SORT,10);if(0===r){if(t.OWN_NAME.toLowerCase()>e.OWN_NAME.toLowerCase())return 1;if(t.OWN_NAME.toLowerCase()<e.OWN_NAME.toLowerCase())return-1}return r}).map(function(t){return{id:parseInt(t.ID,10),errors:t.CALCULATE_ERRORS,checked:"Y"===t.CHECKED,price:parseFloat(t.PRICE),name:t.NAME,description:t.DESCRIPTION,period:t.PERIOD_TEXT,type:t.TYPE,logoUrl:t.LOGOTIP?t.LOGOTIP.SRC:""}}))}),l(n,"SET_PAYMENT_METHODS",function(t,e){(0,t.commit)("SET_PAYMENT_METHODS",e.sort(function(t,e){var r=parseInt(t.SORT,10)-parseInt(e.SORT,10);if(0===r){if(t.NAME.toLowerCase()>e.NAME.toLowerCase())return 1;if(t.NAME.toLowerCase()<e.NAME.toLowerCase())return-1}return r}).map(function(t){return{id:parseInt(t.ID,10),name:t.NAME,checked:"Y"===t.CHECKED,description:t.DESCRIPTION,isCash:"Y"===t.IS_CASH}}))}),l(n,"REFRESH_ORDER",function(t,e){var r=t.commit,n=t.dispatch;t.state;e.SHOW_AUTH&&console.error(e.ERROR),n("cart/getFromSOA",e,{root:!0}),r("SET_DATA",e),r("SET_PROPERTY_LIST",e.ORDER_PROP.properties.map(function(t){return{id:t.ID,name:t.NAME,code:t.CODE,description:t.DESCRIPTION,fieldName:"ORDER_PROP_".concat(t.ID),value:t.VALUE[0],required:"Y"===t.REQUIRED,isLocation:"Y"===t.IS_LOCATION}})),n("SET_SHIPPING_METHODS",e.DELIVERY),n("SET_PAYMENT_METHODS",e.PAY_SYSTEM),r("SET_PERSON_TYPE",Object.values(e.PERSON_TYPE).find(function(t){return"Y"===t.CHECKED}).ID)}),l(n,"sendRequest",function(e,r){var n=e.state,i=e.getters,o=e.dispatch,a=t.BX&&t.BX.bitrix_sessid?t.BX.bitrix_sessid():"",u=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),n.forEach(function(e){l(t,e,r[e])})}return t}({order:i.getAllFormData,via_ajax:"Y",action:"refreshOrderAjax",SITE_ID:n.soaData.siteID,signedParamsString:n.soaData.signedParamsString,sessid:a},r);return new Promise(function(t,e){s.e(n.soaData.ajaxUrl,u,function(r){r.order&&o("REFRESH_ORDER",r.order),"enterCoupon"===u.action&&(r.order?o(c.a,{title:"Промокод применён"},{root:!0}):(o(c.a,{title:"Промокод не найден",text:"Возможно, он работает только в стационарных магазинах"},{root:!0}),e())),"removeCoupon"!==u.action||r.order||console.log("removeCouponItem"),t()},function(t){console.error(t.message),e()})})}),l(n,_,function(t,e){var r=t.commit,n=t.dispatch,i=e.id;r(_,i),n("sendRequest")}),l(n,u,function(t,e){var r=t.commit,n=t.dispatch,i=e.id;r(u,i),n("sendRequest")}),l(n,"saveOrderAjax",function(t){return(0,t.dispatch)("sendRequest",{action:"saveOrderAjax"})}),l(n,"enterCoupon",function(t,e){return(0,t.dispatch)("sendRequest",{action:"enterCoupon",coupon:e})}),l(n,"removeCoupon",function(t){return(0,t.dispatch)("sendRequest",{action:"removeCoupon"})}),l(n,"setStep",function(t,e){var r=t.commit,n=t.dispatch;"final"===e.key?n("checkout"):r("SET_CURRENT_STEP",e)}),l(n,"checkout",function(t){var e=t.commit,r=(t.dispatch,t.state),n=t.getters,i={};r.selectedPaymentMethodId||(i.PAY_SYSTEM=["Не выбран метод оплаты"]),r.selectedShippingMethodId||(i.DELIVERY=["Не выбран способ доставки"]),Object.keys(i).length?e("SET_ERRORS",i):(e("SET_CHECKOUT_STATUS","loading"),a.a.post("/checkout/",n.getAllFormData).then(function(t){return t.data}).then(function(t){if(t&&t.order){var r=t.order;t.SHOW_AUTH?console.error("SHOW_AUTH not implemented"):(r.REDIRECT_URL&&r.REDIRECT_URL.length&&(document.location.href=r.REDIRECT_URL),r.ERROR&&e("SET_ERRORS",r.ERROR))}e("SET_CHECKOUT_STATUS",null)}))}),l(n,"showErrors",function(t,e){t.commit;var r=t.dispatch;Object.keys(e).forEach(function(t){var n=e[t];Array.isArray(n)?n.forEach(function(t){r(c.a,{title:t},{root:!0})}):r(c.a,{title:n},{root:!0})})}),n),v=(l(i={SET_DATA:function(t,e){t.result={TOTAL:e.TOTAL,LOCAL_STORE:"Y"===e.LOCAL_STORE,CURRENT_STORE:e.CURRENT_STORE,BUYER_STORE:e.BUYER_STORE}},SET_SOA:function(t,e){t.soaData={signedParamsString:e.signedParamsString,siteID:e.siteID,ajaxUrl:e.ajaxUrl}},SET_CHECKOUT_STATUS:function(t,e){t.checkoutStatus=e},SET_CURRENT_STEP:function(t,e){var r=e.key;t.currentStepName=r},SET_PROPERTY_LIST:function(t,e){t.propertyList=e}},"SET_SHIPPING_METHODS",function(t,e){t.delivery=e}),l(i,u,function(t,e){t.selectedShippingMethodId=e}),l(i,"SET_PAYMENT_METHODS",function(t,e){t.paymentMethods=e}),l(i,_,function(t,e){t.selectedPaymentMethodId=e}),l(i,"SET_PERSON_TYPE",function(t,e){t.personType=e}),l(i,"SET_ERRORS",function(t,e){t.errors=e}),i);e.c={namespaced:!0,state:{currentStepName:"basket",steps:[{key:"basket",next:"form",title:"Корзина",nextButtonText:"Перейти к оформлению"},{key:"form",next:"shipping-and-payment",title:"Ваши данные",nextButtonText:"Доставка и оплата"},{key:"shipping-and-payment",next:"final",title:"Доставка и оплата",nextButtonText:"Оформить заказ"},{key:"final",next:"basket",title:"Финал",nextButtonText:"Оплатить заказ"}],propertyList:[],delivery:[],selectedShippingMethodId:null,selectedShippingMethod:null,paymentMethods:[],selectedPaymentMethodId:null,selectedPaymentMethod:null,result:null,props:{},checkoutStatus:null,soaData:null,errors:{PROPERTY:[],PAY_SYSTEM:[],DELIVERY:[],AUTH:[]}},getters:d,actions:p,mutations:v}}).call(this,r(5))},6:function(t,e){t.exports=jQuery},99:function(t,e,r){"use strict";var n=r(1),i={name:"InputField",props:["prop","value"],data:function(){return{isActive:""!==this.value,type:null,autocomplete:null}},mounted:function(){switch(this.prop.code){case"EMAIL":this.type="email",this.autocomplete="email";break;case"FIO":this.type="text",this.autocomplete="name";break;case"PHONE":this.type="tel",this.autocomplete="tel";break;default:this.type="text",this.autocomplete="false"}}},s=r(0);function o(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var a={name:"CheckoutForm",components:{InputField:Object(s.a)(i,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"input-field input-field_primary",class:{active:t.isActive}},[r("label",{staticClass:"input-field__label",attrs:{for:"property-"+t.prop.id}},[t._v(t._s(t.prop.required?t.prop.name+"*":t.prop.name))]),t._v(" "),r("input",{staticClass:"input-field__input",attrs:{id:"property-"+t.prop.id,name:t.prop.fieldName,type:t.type,autocomplete:t.autocomplete,required:t.prop.required},domProps:{value:t.value},on:{input:function(e){return t.$emit("input",e.target.value)},focus:function(e){t.isActive=!0},blur:function(e){""===e.target.value&&(t.isActive=!1)}}})])},[],!1,null,null,null).exports},computed:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),n.forEach(function(e){o(t,e,r[e])})}return t}({},Object(n.d)("checkout",{propertyList:"propertyList",errors:"errors"}),{getPersonTypeId:function(){return window.soaData.result.PERSON_TYPE[Object.keys(window.soaData.result.PERSON_TYPE).filter(function(t){return"Y"===window.soaData.result.PERSON_TYPE[t].CHECKED})[0]].ID}})},c=Object(s.a)(a,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"order-personal-info"},[r("h3",{staticClass:"order-personal-info__title"},[t._v("Ваши данные")]),t._v(" "),r("div",{staticClass:"order-personal-info__form"},[t.errors.PROPERTY&&t.errors.PROPERTY.length?t._l(t.errors.PROPERTY,function(e){return r("div",{staticClass:"order-personal-info__error"},[t._v(t._s(e)+"\n      ")])}):t._e(),t._v(" "),t.errors.PROPERTY?r("div",{staticClass:"order-personal-info__error"},[t._v(t._s(t.errors.PROPERTY[0])+"\n    ")]):t._e(),t._v(" "),r("div",{staticClass:"order-personal-info__subtitle"},[t._v("Данные покупателя")]),t._v(" "),r("div",{staticClass:"order-personal-info__container"},t._l(t.propertyList,function(e){return r("div",{staticClass:"form-group"},[r("InputField",{attrs:{prop:e},model:{value:e.value,callback:function(r){t.$set(e,"value",r)},expression:"item.value"}})],1)}),0),t._v(" "),r("div",{staticClass:"order-personal-info__subtitle"},[t._v("Адрес доставки")]),t._v(" "),t._m(0)],2),t._v(" "),t.getPersonTypeId?r("input",{attrs:{type:"hidden",name:"PERSON_TYPE"},domProps:{value:t.getPersonTypeId}}):t._e()])},[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"order-personal-info__container"},[r("div",{staticClass:"form-group"},[r("div",{staticClass:"input-field input-field_primary"},[r("label",{staticClass:"input-field__label"},[t._v("Населённый пункт")]),t._v(" "),r("input",{staticClass:"input-field__input",attrs:{type:"text",autocomplete:"address-level2"}})])]),t._v(" "),r("div",{staticClass:"form-group"},[r("div",{staticClass:"input-field input-field_primary"},[r("label",{staticClass:"input-field__label"},[t._v("Улица")]),t._v(" "),r("input",{staticClass:"input-field__input",attrs:{type:"text",autocomplete:"address-line1"}})])]),t._v(" "),r("div",{staticClass:"form-group form-group_row"},[r("div",{staticClass:"input-field input-field_primary"},[r("label",{staticClass:"input-field__label"},[t._v("Дом")]),t._v(" "),r("input",{staticClass:"input-field__input",attrs:{type:"text"}})]),t._v(" "),r("div",{staticClass:"input-field input-field_primary"},[r("label",{staticClass:"input-field__label"},[t._v("Квартира/офис")]),t._v(" "),r("input",{staticClass:"input-field__input",attrs:{type:"text",autocomplete:"address-line2"}})])]),t._v(" "),r("div",{staticClass:"form-group form-group_row"},[r("div",{staticClass:"input-field input-field_primary"},[r("label",{staticClass:"input-field__label"},[t._v("Этаж")]),t._v(" "),r("input",{staticClass:"input-field__input",attrs:{type:"text"}})]),t._v(" "),r("div",{staticClass:"input-field input-field_primary"},[r("label",{staticClass:"input-field__label"},[t._v("Подъезд")]),t._v(" "),r("input",{staticClass:"input-field__input",attrs:{type:"text"}})])]),t._v(" "),r("div",{staticClass:"form-group"},[r("div",{staticClass:"input-field input-field_primary"},[r("label",{staticClass:"input-field__label"},[t._v("Индекс")]),t._v(" "),r("input",{staticClass:"input-field__input",attrs:{type:"number",autocomplete:"postal-code"}})])])])}],!1,null,"dafd5b42",null).exports,l=r(30);function u(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var _={name:"CheckoutShippingAndPayment",computed:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),n.forEach(function(e){u(t,e,r[e])})}return t}({},Object(n.d)("checkout",{selectedShippingId:"selectedShippingMethodId",selectedPaymentId:"selectedPaymentMethodId",paymentMethods:"paymentMethods",errors:"errors",currentStore:function(t){return t.result.CURRENT_STORE}}),Object(n.c)("checkout",{shippingMethods:"visibleShippingMethods"})),methods:Object(n.b)("checkout",{selectPayment:l.a,selectShipping:l.b})},d=Object(s.a)(_,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"order-shiping"},[r("div",{staticClass:"order-shiping__shipping-type"},[t.errors.DELIVERY&&t.errors.DELIVERY.length?t._l(t.errors.DELIVERY,function(e){return r("div",{staticClass:"order-shiping__error"},[t._v("\n        "+t._s(e)+"\n      ")])}):t._e(),t._v(" "),r("h3",{staticClass:"order-shiping__title"},[t._v("Способ получения")]),t._v(" "),t._l(t.shippingMethods,function(e){return r("div",{key:e.id,staticClass:"order-option"},[r("input",{staticClass:"order-option__input",attrs:{type:"radio",name:"DELIVERY_ID",id:"DELIVERY_"+e.id,change:e.id===t.selectedShippingId},domProps:{value:e.id},on:{change:function(r){return t.selectShipping(e)}}}),t._v(" "),r("label",{staticClass:"order-option__header",attrs:{for:"DELIVERY_"+e.id}},[e.logoUrl?r("img",{staticClass:"order-option__img",attrs:{src:e.logoUrl,alt:e.name}}):t._e(),t._v(" "),r("div",{staticClass:"order-option__title"},[t._v(t._s(e.name))]),t._v(" "),r("div",{staticClass:"order-option__info"},[0===e.price?r("span",{staticClass:"green"},[t._v("Бесплатная доставка")]):r("span",[t._v(t._s(t._f("formatPrice")(e.price)))]),t._v(" "),e.period?r("span",[t._v(t._s(e.period))]):t._e()])]),t._v(" "),e.description||"P"===e.type?r("div",{staticClass:"order-option__body"},["P"===e.type?r("ul",{staticClass:"order-option-list"},[r("li",{staticClass:"order-option-list__item"},[r("div",{staticClass:"order-option-list__title"},[t._v(t._s(t.currentStore.NAME))]),t._v(" "),r("a",{staticClass:"order-option-list__link",attrs:{href:"#"}},[t._v("Показать на карте")])])]):t._e(),t._v(" "),r("p",{staticClass:"order-option__description",domProps:{innerHTML:t._s(e.description)}})]):t._e()])})],2),t._v(" "),r("div",{staticClass:"order-shiping__payment-type"},[t.errors.PAY_SYSTEM&&t.errors.PAY_SYSTEM.length?t._l(t.errors.PAY_SYSTEM,function(e){return r("div",{staticClass:"order-shiping__error"},[t._v("\n        "+t._s(e)+"\n      ")])}):t._e(),t._v(" "),r("h3",{staticClass:"order-shiping__title"},[t._v("Способ оплаты")]),t._v(" "),t._l(t.paymentMethods,function(e){return r("div",{key:e.id,staticClass:"order-option"},[r("input",{staticClass:"order-option__input",attrs:{type:"radio",name:"PAY_SYSTEM_ID",id:"PAY_SYSTEM_"+e.id},domProps:{value:e.id,checked:e.id===t.selectedPaymentId},on:{change:function(r){return t.selectPayment(e)}}}),t._v(" "),r("label",{staticClass:"order-option__header",attrs:{for:"PAY_SYSTEM_"+e.id}},[r("div",{staticClass:"order-option__title"},[t._v(t._s(e.name))]),t._v(" "),e.description?r("div",{staticClass:"order-option__description"},[t._v(t._s(e.description)+"\n        ")]):t._e(),t._v(" "),e.isCash?t._e():r("div",{staticClass:"order-option__info"},[r("i",{staticClass:"icon icon-visa"}),r("i",{staticClass:"icon icon-mastercard"}),r("i",{staticClass:"icon icon-mir"})])])])})],2)])},[],!1,null,null,null).exports,p=r(3),v={name:"ProductItem",props:{item:{type:Object,required:!0}},methods:Object(n.b)("cart",{removeFromCart:"removeFromCart",increment:"incrementItemQuantity",decrement:"decrementItemQuantity"})};function f(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var m={name:"ProductList",components:{ProductItem:Object(s.a)(v,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"order-product"},[r("div",{staticClass:"order-product__col-image"},[r("img",{staticClass:"order-product__img",attrs:{src:t.item.picture,srcset:(t.item.picture2x||t.item.picture)+" 2x",alt:t.item.name}})]),t._v(" "),r("div",{staticClass:"order-product__col-info"},[r("a",{staticClass:"order-product__name",attrs:{href:t.item.url}},[t._v(t._s(t.item.name))]),t._v(" "),r("div",{staticClass:"order-product__description"},[t._v(t._s(t.item.pack))])]),t._v(" "),r("div",{staticClass:"order-product__col-count"},[r("div",{staticClass:"order-product__counter"},[r("button",{staticClass:"order-product__decrement",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.decrement(t.item)}}},[t._v("-")]),t._v(" "),r("div",{staticClass:"order-product__quantity"},[t._v(t._s(t.item.quantity))]),t._v(" "),r("button",{staticClass:"order-product__increment",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.increment(t.item)}}},[t._v("+")])]),t._v(" "),r("div",{staticClass:"order-product__count-note"},[t._v(t._s(t._f("formatPrice")(t.item.price))+"/"+t._s(t.item.MEASURE_NAME||"шт.")+".")])]),t._v(" "),r("div",{staticClass:"order-product__col-price"},[t.item.price_benefit>0?r("del",{staticClass:"order-product__old-price"},[t._v(t._s(t._f("formatPrice")(t.item.sumBase)))]):t._e(),t._v(" "),r("div",{staticClass:"order-product__price"},[t._v(t._s(t._f("formatPrice")(t.item.sum)))]),t._v(" "),t.item.price_benefit>0?r("div",{staticClass:"order-product__profit"},[t._v("Выгода "+t._s(t._f("formatPrice")(t.item.price_benefit)))]):t._e()]),t._v(" "),r("button",{staticClass:"order-product__btn-delete",on:{click:function(e){return e.preventDefault(),t.removeFromCart(t.item)}}},[r("svg",{attrs:{width:"18",height:"20",viewBox:"0 0 18 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[r("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5.67041 0H12.5289V2.54197H17.6368V4.46043H0.5625V2.54197H5.67041V0ZM7.58888 1.91847V2.54197H10.6105V1.91847H7.58888ZM2.86418 20V6.28298H4.78265V18.0815H13.4157V6.28298H15.3342V20H2.86418ZM8.14052 6.28298H6.22206V16.4149H8.14052V6.28298ZM10.0592 6.28298H11.9777V16.4149H10.0592V6.28298Z",fill:"currentColor"}})])])])},[],!1,null,null,null).exports},computed:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),n.forEach(function(e){f(t,e,r[e])})}return t}({},Object(n.d)("checkout",{total:function(t){return t.result.TOTAL}}),Object(n.c)({products:"cart/availableProducts"}),{productCountText:function(){return this.products.length+" "+p.a.declOfNum(this.products.length,["товар","товара","товаров"])}})},h=Object(s.a)(m,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"order-item"},[r("div",{staticClass:"order-item__list"},t._l(t.products,function(t){return r("ProductItem",{key:t.basketItemId,attrs:{item:t}})}),1),t._v(" "),r("div",{staticClass:"order-item__amount"},[r("div",{staticClass:"order-item__row"},[r("div",{staticClass:"order-item__key"},[t._v("Товары")]),t._v(" "),r("div",{staticClass:"order-item__value"},[r("small",{staticClass:"gray"},[t._v(t._s(t.productCountText))]),t._v(" "),r("b",[t._v(t._s(t._f("formatPrice")(t.total.ORDER_PRICE)))])])]),t._v(" "),r("div",{staticClass:"order-item__row"},[r("div",{staticClass:"order-item__key"},[t._v("Доставка")]),t._v(" "),r("div",{staticClass:"order-item__value"},[r("b",[t._v(t._s(t.total.DELIVERY_PRICE>0?t.total.DELIVERY_PRICE:"Бесплатно"))])])]),t._v(" "),t.total.DISCOUNT_PRICE>0?r("div",{staticClass:"order-item__row"},[r("div",{staticClass:"order-item__key"},[t._v("Скидка")]),t._v(" "),r("div",{staticClass:"order-item__value"},[r("b",{staticClass:"red"},[t._v(t._s(t._f("formatPrice")(t.total.DISCOUNT_PRICE)))])])]):t._e()])])},[],!1,null,null,null).exports;function b(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var C={name:"Promocode",data:function(){return{promocode:"",isModal:document.documentElement.clientWidth<768,status:null}},methods:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),n.forEach(function(e){b(t,e,r[e])})}return t}({},Object(n.b)({enterCoupon:"checkout/enterCoupon"}),{setPromocode:function(){var t=this;if(this.status="loading",""===this.promocode)return this.status="failed",void setTimeout(function(){t.status=null},300);this.enterCoupon(this.promocode).then(function(){t.status="success"}).catch(function(){t.status="failed",setTimeout(function(){t.status=null},1e3)})}})};function E(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),n.forEach(function(e){O(t,e,r[e])})}return t}function O(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var S={name:"CheckoutBasket",components:{ProductList:h,Promocode:Object(s.a)(C,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"order-promocode"},[t.isModal?[r("button",{staticClass:"btn btn-gray-2 btn-block"},[t._v("Добавить промокод")])]:[r("div",{staticClass:"order-promocode__field"},[r("div",{staticClass:"input-field input-field_primary-white"},[r("label",{staticClass:"input-field__label"},[t._v("Добавить промокод")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.promocode,expression:"promocode"}],staticClass:"input-field__input",attrs:{type:"text",autocomplete:"off",disabled:"success"===t.status},domProps:{value:t.promocode},on:{input:function(e){e.target.composing||(t.promocode=e.target.value)}}})])]),t._v(" "),r("div",{staticClass:"order-promocode__button"},["loading"===t.status?r("button",{staticClass:"btn btn-gray-2 btn-block",attrs:{type:"button"}},[r("span",{staticClass:"spinner-border spinner-border-sm",attrs:{role:"status"}})]):"success"===t.status?r("button",{staticClass:"btn btn-green btn-block",attrs:{type:"button"}},[r("svg",{attrs:{width:"16",height:"14",viewBox:"0 0 16 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[r("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.5588 3.06065L5.49816 13.1213L0.4375 8.06065L2.55882 5.93933L5.49816 8.87867L13.4375 0.939331L15.5588 3.06065Z",fill:"currentColor"}})])]):"failed"===t.status?r("button",{staticClass:"btn btn-red btn-block",attrs:{type:"button"}},[t._v("Ошибка")]):r("button",{staticClass:"btn btn-gray-2 btn-block",attrs:{type:"button"},on:{click:t.setPromocode}},[t._v("Применить")])])]],2)},[],!1,null,null,null).exports},computed:E({},Object(n.d)({total:function(t){return t.checkout.result.TOTAL}}),Object(n.c)("checkout",{nextStepButton:"nextStepButton"}),Object(n.c)({products:"cart/availableProducts"}),{productCountText:function(){return this.products.length+" "+p.a.declOfNum(this.products.length,["товар","товара","товаров"])}}),methods:E({},Object(n.b)({clearCart:"cart/clearCart",setStep:"checkout/setStep"}))},y=Object(s.a)(S,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"order"},[r("h3",{staticClass:"order__title"},[t._v("В заказе "+t._s(t.productCountText))]),t._v(" "),r("div",{staticClass:"order__subtitle"},[r("button",{staticClass:"order__btn-clear",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.clearCart(e)}}},[r("i",{staticClass:"icon icon-delete"}),t._v(" "),r("span",[t._v("Очистить корзину")])])]),t._v(" "),r("ProductList"),t._v(" "),r("Promocode"),t._v(" "),r("div",{staticClass:"order-amount"},[r("div",{staticClass:"order-amount__sale"},[r("div",{staticClass:"order-amount__key"},[t._v("ваша Скидка")]),t._v(" "),r("div",{staticClass:"order-amount__value"},[t._v(t._s(t._f("formatPrice")(t.total.DISCOUNT_PRICE)))])]),t._v(" "),r("div",{staticClass:"order-amount__sum"},[r("div",{staticClass:"order-amount__key"},[t._v("Итого к оплате")]),t._v(" "),r("div",{staticClass:"order-amount__value"},[t._v(t._s(t._f("formatPrice")(t.total.ORDER_TOTAL_PRICE)))])])]),t._v(" "),r("div",{staticClass:"order__footer"},[r("button",{staticClass:"order__btn-checkout btn btn-red btn-skew",attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.setStep(t.nextStepButton)}}},[t._v(t._s(t.nextStepButton.text))]),t._v(" "),t._m(0)])],1)},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"order__footer-note"},[this._v("\n      Нажимая на кнопку, вы подтверждаете согласие на обработку\n      "),e("a",{attrs:{href:"#"}},[this._v(" персональных данных")]),this._v("\n      и\n      "),e("a",{attrs:{href:"#"}},[this._v(" политику конфиденциальности")])])}],!1,null,"178003c0",null).exports,T={name:"CheckoutAlert"},P={name:"CheckoutFinal"},g={name:"CheckoutFinal"};function R(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),n.forEach(function(e){k(t,e,r[e])})}return t}function k(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var I={name:"Checkout",components:{CheckoutAlert:Object(s.a)(T,function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"order-alert"},[e("div",{staticClass:"order-alert__title"},[this._v("Внимание! Этот заказ был разделён.")]),this._v(" "),e("div",{staticClass:"order-alert__text"},[this._v("Часть заказа будет отправлена с центрального склада. Вы получите товары разными\n    способами доставки.\n  ")])])}],!1,null,null,null).exports,CheckoutForm:c,CheckoutShippingAndPayment:d,CheckoutBasket:y,CheckoutFinal:Object(s.a)(P,function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{},[e("h3",[this._v("Заказ оформлен, его номер:")]),this._v(" "),e("p",[this._v("1354315")]),this._v(" "),e("p",[this._v("Подробная информация о заказе отправлена на вашу почту konstantinopolsky@gmail.com. В ближайшее время с вами свяжется менеджер для уточнения деталей заказа.")])])}],!1,null,"8a629224",null).exports,CheckoutEmptyBasket:Object(s.a)(g,function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"cart__empty"},[e("h3",[this._v("Ваша корзина пуста")]),this._v(" "),e("p",[this._v("Добавьте покупки, чтобы начать оформление заказа")]),this._v(" "),e("button",{staticClass:"btn btn-red btn-skew"},[this._v("Начать покупать")])])}],!1,null,"11276bc9",null).exports},data:function(){return{isMobile:document.documentElement.clientWidth<1240}},computed:R({},Object(n.d)({products:function(t){return t.cart.items},steps:function(t){return t.checkout.steps},currentStep:function(t){return t.checkout.currentStepName}}),Object(n.c)("checkout",{nextStepButton:"nextStepButton"}),{currentTabComponent:function(){return"checkout-".concat(this.currentStep)}}),methods:R({},Object(n.b)("checkout",{setStep:"setStep",refreshOrderAjax:"refreshOrderAjax"}))},D=Object(s.a)(I,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("article",[r("header",{staticClass:"cart-section-header"},[r("div",{staticClass:"container"},[r("div",{staticClass:"breadcumps"},[r("a",{staticClass:"breadcumps__link red",attrs:{href:"/"}},[t._v("Главная")]),t._v(" "),r("span",{staticClass:"breadcumps__delimiter"}),t._v(" "),r("span",{staticClass:"breadcumps__page"},[t._v(t._s("basket"===t.currentStep?"Корзина":"Оформление заказа"))])]),t._v(" "),r("h2",{staticClass:"cart-section-header__title"},[t._v(t._s("basket"===t.currentStep?"Корзина":"Оформление заказа"))]),t._v(" "),r("button",{staticClass:"btn btn-red btn-skew",attrs:{type:"button"},on:{click:t.refreshOrderAjax}},[t._v("Сохранить значения")])])]),t._v(" "),r("section",{staticClass:"cart"},[t.products.length?t.isMobile?["basket"!==t.currentStep?r("ul",{staticClass:"cart-mobile-header"},t._l(t.steps,function(e){return"basket"!==e.key?r("li",{key:e.key,class:["cart-mobile-header__item",{active:t.currentStep===e.key}]},[r("a",{staticClass:"cart-mobile-header__link",attrs:{href:"#"},on:{click:function(r){return r.preventDefault(),t.setStep(e)}}},[t._v(t._s(e.title)+"\n          ")])]):t._e()}),0):t._e(),t._v(" "),r("div",{staticClass:"container"},[r("keep-alive",[r(t.currentTabComponent,{tag:"component"})],1)],1),t._v(" "),r("div",{staticClass:"cart-mobile-bottom"},[r("button",{staticClass:"cart-mobile-bottom__button btn btn-red btn-block",attrs:{type:"button"},on:{click:function(e){return t.setStep(t.nextStepButton)}}},[t._v("\n          "+t._s(t.nextStepButton.text)+"\n        ")])])]:[r("div",{staticClass:"container"},["final"===t.currentStep?r("CheckoutFinal"):r("div",{staticClass:"cart__inner"},[r("div",{staticClass:"cart__col-left"},[r("CheckoutForm"),t._v(" "),r("CheckoutShippingAndPayment")],1),t._v(" "),r("div",{staticClass:"cart__col-right"},[r("CheckoutBasket")],1)])],1)]:r("CheckoutEmptyBasket")],2)])},[],!1,null,"a7c29886",null);e.a=D.exports}},[[177,1,0]]]);